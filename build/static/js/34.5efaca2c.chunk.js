"use strict";(self.webpackChunkdelivery_admin=self.webpackChunkdelivery_admin||[]).push([[34],{4034:function(e,n,a){a.r(n),a.d(n,{default:function(){return W}});var i=a(1413),t=a(9439),o=a(2791),r=a(3695),d=a(3099),l=a(6755),s=a(7462),c=a(4942),A=a(7106),u=a(1694),g=a.n(u),E=a(4925),h=a(5179),p=a(1354),Q=o.forwardRef((function(e,n){var a,i=e.prefixCls,r=void 0===i?"rc-switch":i,d=e.className,l=e.checked,s=e.defaultChecked,A=e.disabled,u=e.loadingIcon,Q=e.checkedChildren,m=e.unCheckedChildren,f=e.onClick,v=e.onChange,C=e.onKeyDown,Z=(0,E.Z)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),y=(0,h.Z)(!1,{value:l,defaultValue:s}),B=(0,t.Z)(y,2),I=B[0],j=B[1];function x(e,n){var a=I;return A||(j(a=e),null===v||void 0===v||v(a,n)),a}var k=g()(r,d,(a={},(0,c.Z)(a,"".concat(r,"-checked"),I),(0,c.Z)(a,"".concat(r,"-disabled"),A),a));return o.createElement("button",Object.assign({},Z,{type:"button",role:"switch","aria-checked":I,disabled:A,className:k,ref:n,onKeyDown:function(e){e.which===p.Z.LEFT?x(!1,e):e.which===p.Z.RIGHT&&x(!0,e),null===C||void 0===C||C(e)},onClick:function(e){var n=x(!I,e);null===f||void 0===f||f(n,e)}}),u,o.createElement("span",{className:"".concat(r,"-inner")},I?Q:m))}));Q.displayName="Switch";var m=Q,f=a(1929),v=a(9125),C=a(1815),Z=a(2833),y=function(e,n){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var t=0;for(i=Object.getOwnPropertySymbols(e);t<i.length;t++)n.indexOf(i[t])<0&&Object.prototype.propertyIsEnumerable.call(e,i[t])&&(a[i[t]]=e[i[t]])}return a},B=o.forwardRef((function(e,n){var a,i=e.prefixCls,t=e.size,r=e.disabled,d=e.loading,l=e.className,u=void 0===l?"":l,E=y(e,["prefixCls","size","disabled","loading","className"]),h=o.useContext(f.E_),p=h.getPrefixCls,Q=h.direction,B=o.useContext(C.Z),I=o.useContext(v.Z),j=r||I||d,x=p("switch",i),k=o.createElement("div",{className:"".concat(x,"-handle")},d&&o.createElement(A.Z,{className:"".concat(x,"-loading-icon")})),N=g()((a={},(0,c.Z)(a,"".concat(x,"-small"),"small"===(t||B)),(0,c.Z)(a,"".concat(x,"-loading"),d),(0,c.Z)(a,"".concat(x,"-rtl"),"rtl"===Q),a),u);return o.createElement(Z.Z,{insertExtraNode:!0},o.createElement(m,(0,s.Z)({},E,{prefixCls:x,className:N,disabled:j,ref:n,loadingIcon:k})))}));B.__ANT_SWITCH=!0;var I=B,j=a(6106),x=a(914),k=a(7309),N=a(1520),S=a(5485),b=a(9184),w=a(3168),J=a(2972),M=a(9389),z=a(3734),K=a(1095),R=a(2862),F=a(9553),T=a(3344),H=a(9286),U=a(5010),P=a(2201),D=a(184),Y=["updateData","t","categoryData","modalType"],q=M.Z.TextArea,L=z.Z.Option,G={labelCol:{span:8},wrapperCol:{span:14}},X=function(e){var n="image/jpeg"===e.type||"image/png"===e.type;n||r.ZP.error("Siz faqat JPG/PNG turdagi fayllarni yuklay olasiz!");var a=e.size/1024/1024<2;return a||r.ZP.error("Surat hajmi 2MB dan kichik bo'lishi kerak!"),n&&a},O=function(e){var n=e.updateData,a=e.t,d=e.categoryData,l=e.modalType,s=(0,E.Z)(e,Y),c=(0,U.I0)(),u=(0,o.useState)(!1),g=(0,t.Z)(u,2),h=g[0],p=g[1],Q=(0,o.useState)(),m=(0,t.Z)(Q,2),f=m[0],v=m[1],C=(0,o.useState)(),Z=(0,t.Z)(C,2),y=Z[0],B=Z[1],j=K.Z.useForm(),x=(0,t.Z)(j,1)[0],k=(0,J.qt)(),N=(0,t.Z)(k,2),S=N[0],b=N[1],w=(0,J.zp)(),O=(0,t.Z)(w,2),W=O[0],V=O[1],_=function(){v(""),x.resetFields()};(0,o.useEffect)((function(){return n&&"update"===l&&(console.log("updateData: ",n),v("http://147.182.130.242:3000/".concat(null===n||void 0===n?void 0:n.image)),x.setFieldsValue({image:null===n||void 0===n?void 0:n.image,name:null===n||void 0===n?void 0:n.name,categoryId:null===n||void 0===n?void 0:n.categoryId,description:null===n||void 0===n?void 0:n.description,price:null===n||void 0===n?void 0:n.price,discount:null===n||void 0===n?void 0:n.discount,isHave:null===n||void 0===n?void 0:n.isHave})),function(){return _()}}),[n,l]);var $=(0,D.jsxs)("div",{children:[h?(0,D.jsx)(A.Z,{}):(0,D.jsx)(H.Z,{}),(0,D.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),ee=null===d||void 0===d?void 0:d.map((function(e){return(0,D.jsx)(L,{value:e.id,children:e.name},e.id)})),ne=(0,i.Z)({onOk:function(){x.validateFields().then((function(e){console.log("data: ",e);var a=(0,i.Z)((0,i.Z)({},e),{},{image:y});if("update"===l)e.image=y,S({id:n.id,value:a}).unwrap().then((function(e){200===e.statusCode&&(r.ZP.success("Muvaffaqiyati tahrirlandi."),c((0,P.pC)({openModal:!1,modalType:""})),v(""),x.resetFields())})).catch((function(e){r.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}));else if("create"===l){W(a).unwrap().then((function(e){200===e.statusCode&&(r.ZP.success("Muvaffaqiyati saqlandi."),c((0,P.pC)({openModal:!1,modalType:""})),_())})).catch((function(e){r.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}))}})).catch((function(e){return console.log("Form error: ",e)}))},confirmLoading:!!l.length&&("create"===l?V.isLoading:b.isLoading),forceRender:!0},s);return(0,D.jsx)(D.Fragment,{children:(0,D.jsx)(R.Z,(0,i.Z)((0,i.Z)({},ne),{},{children:(0,D.jsxs)(K.Z,(0,i.Z)((0,i.Z)({},G),{},{form:x,name:"basic",layout:"horizontal",autoComplete:"off",children:[(0,D.jsx)(K.Z.Item,{name:"image",label:a("image"),rules:[{required:!0,message:"Rasm yuklanmadi"}],children:(0,D.jsx)(F.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"http://147.182.130.242:3000/image-upload",beforeUpload:X,onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(B(e.file.response.result.url),function(e,n){var a=new FileReader;a.addEventListener("load",(function(){return n(a.result)})),a.readAsDataURL(e)}(e.file.originFileObj,(function(e){p(!1),v(e)}))):p(!0)},maxCount:1,children:f?(0,D.jsx)("img",{src:f,alt:"productImage",style:{width:"100%"}}):$})}),(0,D.jsx)(K.Z.Item,{name:"name",label:a("productsMenu.productName"),rules:[{required:!0,message:a("fieldErrorMessage")}],children:(0,D.jsx)(M.Z,{placeholder:a("productsMenu.enter_name")})}),(0,D.jsx)(K.Z.Item,{name:"categoryId",label:a("productsMenu.category"),rules:[{required:!0,message:a("fieldErrorMessage")}],children:(0,D.jsx)(z.Z,{allowClear:!0,placeholder:a("productsMenu.select_category"),children:ee})}),(0,D.jsx)(K.Z.Item,{name:"description",label:a("productsMenu.description"),rules:[{required:!0,message:a("fieldErrorMessage")}],children:(0,D.jsx)(q,{allowClear:!0,autoSize:!0,placeholder:a("productsMenu.enter_desc")})}),(0,D.jsx)(K.Z.Item,{name:"price",label:a("productsMenu.price"),style:{width:"100%"},rules:[{required:!0,message:a("fieldErrorMessage")}],children:(0,D.jsx)(T.Z,{addonAfter:"RUB",placeholder:"1000",style:{width:"100%"}})}),(0,D.jsx)(K.Z.Item,{name:"discount",label:a("productsMenu.discount"),rules:[{required:!0,message:a("fieldErrorMessage")}],children:(0,D.jsx)(T.Z,{addonAfter:"%",placeholder:"5",style:{width:"100%"}})}),(0,D.jsx)(K.Z.Item,{name:"isHave",label:a("productsMenu.isHaveonWareHouse"),rules:[{required:!0,message:a("fieldErrorMessage")}],children:(0,D.jsx)(I,{defaultChecked:!(null===n||void 0===n||!n.isHave)&&(null===n||void 0===n?void 0:n.isHave),size:"small"})})]}))}))})},W=function(){var e,n,a,s,c,A,u=(0,w.$)().t,g=(0,U.v9)((function(e){return e.productSlice})),E=g.openModal,h=g.modalType,p=(0,U.I0)(),Q=(0,o.useState)({page:1,pageSize:20}),m=(0,t.Z)(Q,2),f=m[0],v=m[1],C=(0,J.qt)(),Z=(0,t.Z)(C,2),y=Z[0],B=(Z[1],(0,J.LX)()),M=(0,J.FA)(f),z=(0,J.dY)(),K=(0,t.Z)(z,2),R=K[0],F=K[1].isLoading,T=(0,o.useState)(),H=(0,t.Z)(T,2),Y=H[0],q=H[1],L=[{title:"\u2116",dataIndex:"id",key:"id",width:"5%",render:function(e,n,a){return(0,D.jsx)("span",{children:a+1})}},{title:u("productsMenu.name"),dataIndex:"name",key:"name",render:function(e,n){return(0,D.jsxs)(d.Z,{size:5,children:[(0,D.jsx)(l.Z,{width:30,height:30,src:"http://147.182.130.242:3000/".concat(n.image),fallback:"data:image/png;base64,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"}),e]})}},{title:u("productsMenu.description"),dataIndex:"description",key:"description",render:function(e,n){return(0,D.jsx)(D.Fragment,{children:e})}},{title:(0,D.jsxs)(D.Fragment,{children:[u("productsMenu.price")," ","(RUB)"]}),dataIndex:"price",key:"price",render:function(e,n){return(0,D.jsx)(D.Fragment,{children:e})}},{title:u("productsMenu.discount"),dataIndex:"discount",key:"discount",render:function(e,n){return(0,D.jsx)(D.Fragment,{children:e})}},{title:u("productsMenu.isHaveonWareHouse"),dataIndex:"isHave",key:"isHave",width:"12%",render:function(e,n){return(0,D.jsx)(I,{defaultChecked:e,onChange:function(e){return y({id:n.id,value:(0,i.Z)((0,i.Z)({},n),{},{isHave:e})})},size:"small"})}},{title:u("actions"),key:"action",width:"20%",render:function(e,n,a){return(0,D.jsxs)(j.Z,{wrap:!1,gutter:5,children:[(0,D.jsx)(x.Z,{children:(0,D.jsx)(k.Z,{size:"small",type:"primary",ghost:!0,onClick:function(){return q(e),void p((0,P.pC)({openModal:!0,modalType:"update"}))},children:u("edit")})}),(0,D.jsx)(x.Z,{children:(0,D.jsx)(N.Z,{okText:u("yes"),cancelText:u("no"),onConfirm:function(){return n=e.id,void R({id:n}).unwrap().then((function(e){200===e.statusCode&&r.ZP.success("Muvaffaqiyati o'chirildi.")})).catch((function(e){r.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}));var n},title:u("sureDelete"),children:(0,D.jsx)(k.Z,{size:"small",danger:!0,disabled:F,children:u("delete")})})})]})}}],G={total:(null===(e=M.data)||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.total)*(null===(a=M.data)||void 0===a||null===(s=a.meta)||void 0===s?void 0:s.pagesize),page:f.page,pageSizeOptions:["20","50","100"],showQuickJumper:!0,showSizeChanger:!0,pageSize:f.pageSize,current:f.page,onChange:function(e,n){v({page:e,pageSize:n})}},X={title:u("update"===h?"edit":"add"),open:E,okText:u("update"===h?"edit":"add"),cancelText:u("close"),onCancel:function(){p((0,P.pC)({openModal:!1,modalType:""})),q(void 0)}};return(0,D.jsxs)(D.Fragment,{children:[(0,D.jsxs)(j.Z,{children:[(0,D.jsx)(x.Z,{span:20,children:(0,D.jsx)(S.Z.Title,{level:2,children:u("menus.products")})}),(0,D.jsx)(x.Z,{span:4,children:(0,D.jsx)(k.Z,{type:"primary",onClick:function(){return p((0,P.pC)({openModal:!0,modalType:"create"}))},children:u("add")})})]}),(0,D.jsx)(b.Z,{columns:L,dataSource:null===(c=M.data)||void 0===c?void 0:c.data,loading:M.isFetching,rowKey:function(e){return e.id},pagination:G}),(0,D.jsx)(O,(0,i.Z)({updateData:Y,t:u,modalType:h,categoryData:null===(A=B.data)||void 0===A?void 0:A.data},X))]})}}}]);
//# sourceMappingURL=34.5efaca2c.chunk.js.map