"use strict";(self.webpackChunkdelivery_admin=self.webpackChunkdelivery_admin||[]).push([[755],{3755:function(e,n,a){a.r(n),a.d(n,{default:function(){return z}});var i=a(1413),r=a(9439),t=a(2791),d=a(3695),o=a(6106),l=a(914),s=a(7309),u=a(1520),c=a(5485),m=a(1756),p=a(3168),h=a(4925),f=a(5487),g=a(3734),Z=a(1095),y=a(2862),x=a(9389),v=a(3344),j=a(1666),k=a(5048),b=a(2426),M=a.n(b),w=[{id:2,name:"ADMIN"},{id:3,name:"COURIER"}],C=function(e){return e&&e>=M()().endOf("day")},I=a(5215),T=a(184),D=["updateData","t","categoryData","modalType"],F=g.Z.Option,q={labelCol:{span:8},wrapperCol:{span:14}},P=function(e){var n=e.updateData,a=e.t,o=(e.categoryData,e.modalType),l=(0,h.Z)(e,D),s=(0,k.I0)(),u=Z.Z.useForm(),c=(0,r.Z)(u,1)[0],m=(0,t.useState)(),p=(0,r.Z)(m,2),b=p[0],M=p[1],P=(0,f.rZ)(),z=(0,r.Z)(P,2),S=z[0],R=z[1],X=(0,f.Z)(),Y=(0,r.Z)(X,2),L=Y[0],O=Y[1];(0,t.useEffect)((function(){return n&&"update"===o&&(console.log("updateData: ",n),c.setFieldsValue({image:null===n||void 0===n?void 0:n.image,name:null===n||void 0===n?void 0:n.name,categoryId:null===n||void 0===n?void 0:n.categoryId,description:null===n||void 0===n?void 0:n.description,price:null===n||void 0===n?void 0:n.price,discount:null===n||void 0===n?void 0:n.discount})),function(){c.resetFields()}}),[n,o]);var _=w.map((function(e){return(0,T.jsx)(F,{value:e.name,children:e.name},e.id)})),E=(0,i.Z)({onOk:function(){c.validateFields().then((function(e){var a=(0,i.Z)((0,i.Z)({},e),{},{phone:e.phone.toString(),birthday:b});if(console.log("formData: ",a),"update"===o)S({id:n.id,value:a}).unwrap().then((function(e){200===e.statusCode&&(d.ZP.success("Muvaffaqiyati tahrirlandi."),s((0,I.de)({openModal:!1,modalType:""})),c.resetFields())})).catch((function(e){d.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}));else if("create"===o){L(a).unwrap().then((function(e){200===e.statusCode&&(d.ZP.success("Muvaffaqiyati saqlandi."),s((0,I.de)({openModal:!1,modalType:""})),c.resetFields())})).catch((function(e){d.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}))}})).catch((function(e){return console.log("Form error: ",e)}))},confirmLoading:!!o.length&&("create"===o?O.isLoading:R.isLoading),forceRender:!0},l);return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(y.Z,(0,i.Z)((0,i.Z)({},E),{},{children:(0,T.jsxs)(Z.Z,(0,i.Z)((0,i.Z)({},q),{},{form:c,name:"basic",layout:"horizontal",autoComplete:"off",children:[(0,T.jsx)(Z.Z.Item,{name:"username",label:a("usersMenu.username"),rules:[{required:!0,message:"Username kiriting"}],children:(0,T.jsx)(x.Z,{placeholder:"Username kiriting"})}),(0,T.jsx)(Z.Z.Item,{name:"password",label:"Parol:",rules:[{required:!0,message:"Parol kiriting"}],children:(0,T.jsx)(x.Z,{placeholder:"Parol kiriting"})}),(0,T.jsx)(Z.Z.Item,{name:"phone",label:a("usersMenu.phone_number"),rules:[{type:"regexp",pattern:new RegExp(/^[0-9]*$/gm)},{required:!0,message:"Noto'g'ri format"}],children:(0,T.jsx)(v.Z,{style:{width:"100%"},placeholder:"Telefon raqamini kiriting"})}),(0,T.jsx)(Z.Z.Item,{name:"role",label:a("usersMenu.role"),rules:[{required:!0,message:"Rolini tanlang"}],children:(0,T.jsx)(g.Z,{allowClear:!0,placeholder:"Rolini tanlang",children:_})}),(0,T.jsx)(Z.Z.Item,{name:"birthday",label:a("usersMenu.birthday"),rules:[{required:!0,message:"Tug'ilgan sanasini kiriting"}],children:(0,T.jsx)(j.Z,{allowClear:!0,showNow:!0,format:"DD.MM.YYYY",onChange:function(e,n){return M(n)},style:{width:"100%"},disabledDate:C,placeholder:"Sanani kiriting"})})]}))}))})},z=function(){var e,n,a=(0,p.$)().t,h=(0,k.v9)((function(e){return e.usersSlice})),g=h.openModal,Z=h.modalType,y=(0,k.I0)(),x=(0,f.Im)(),v=(0,f.xY)(),j=(0,f.C5)(),b=(0,r.Z)(j,2),M=b[0],w=b[1].isLoading,C=(0,t.useState)(),D=(0,r.Z)(C,2),F=D[0],q=D[1],z=[{title:"\u2116",dataIndex:"id",key:"id",width:"5%",render:function(e,n,a){return(0,T.jsx)("span",{children:a+1})}},{title:a("usersMenu.username"),dataIndex:"username",key:"username"},{title:a("usersMenu.phone_number"),dataIndex:"phone",key:"phone",render:function(e,n){return(0,T.jsx)(T.Fragment,{children:e})}},{title:a("usersMenu.role"),dataIndex:"role",key:"role",render:function(e,n){return(0,T.jsx)(T.Fragment,{children:e})}},{title:a("usersMenu.birthday"),dataIndex:"birthday",key:"birthday",render:function(e,n){return(0,T.jsx)(T.Fragment,{children:e})}},{title:a("actions"),key:"action",width:"20%",render:function(e,n,i){return(0,T.jsxs)(o.Z,{wrap:!1,gutter:5,children:[(0,T.jsx)(l.Z,{children:(0,T.jsx)(s.Z,{size:"small",type:"primary",ghost:!0,onClick:function(){return q(e),void y((0,I.de)({openModal:!0,modalType:"update"}))},children:a("edit")})}),(0,T.jsx)(l.Z,{children:(0,T.jsx)(u.Z,{okText:a("yes"),cancelText:a("no"),onConfirm:function(){return n=e.id,void M({id:n}).unwrap().then((function(e){200===e.statusCode&&d.ZP.success("Muvaffaqiyati o'chirildi.")})).catch((function(e){d.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}));var n},title:a("sureDelete"),children:(0,T.jsx)(s.Z,{size:"small",danger:!0,disabled:w,children:a("delete")})})})]})}}],S={title:a("update"===Z?"edit":"add"),open:g,okText:a("update"===Z?"edit":"add"),cancelText:a("close"),onCancel:function(){y((0,I.de)({openModal:!1,modalType:""})),q(void 0)}};return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(o.Z,{children:[(0,T.jsx)(l.Z,{span:20,children:(0,T.jsx)(c.Z.Title,{level:2,children:a("menus.users")})}),(0,T.jsx)(l.Z,{span:4,children:(0,T.jsx)(s.Z,{type:"primary",onClick:function(){return y((0,I.de)({openModal:!0,modalType:"create"}))},children:a("add")})})]}),(0,T.jsx)(m.Z,{columns:z,dataSource:null===(e=v.data)||void 0===e?void 0:e.data,loading:v.isFetching,pagination:{defaultPageSize:5},rowKey:function(e){return e.id}}),(0,T.jsx)(P,(0,i.Z)({updateData:F,t:a,modalType:Z,categoryData:null===(n=x.data)||void 0===n?void 0:n.data},S))]})}}}]);
//# sourceMappingURL=755.ed2a0f5e.chunk.js.map