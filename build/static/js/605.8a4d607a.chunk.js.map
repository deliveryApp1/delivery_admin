{"version":3,"file":"static/js/605.8a4d607a.chunk.js","mappings":"oUAwBMA,EAAe,SAACC,GACpB,IAAMC,EAA2B,eAAdD,EAAKE,MAAuC,cAAdF,EAAKE,KACjDD,GACHE,EAAAA,GAAAA,MAAc,sDAEhB,IAAMC,EAASJ,EAAKK,KAAO,KAAO,KAAO,EAIzC,OAHKD,GACHD,EAAAA,GAAAA,MAAc,8CAETF,GAAcG,CACtB,EAwID,EAtIqC,SAAC,GAAuC,IAArCE,EAAoC,EAApCA,QAASC,EAA2B,EAA3BA,WAAYC,EAAe,EAAfA,SAC3D,EAAeC,EAAAA,EAAAA,UAARC,GAAP,eACA,GAA6DC,EAAAA,EAAAA,MAA7D,eAAOC,EAAP,KAAsCC,EAAtC,KAA2BC,UAC3B,GAA8BC,EAAAA,EAAAA,WAAS,GAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAAgCF,EAAAA,EAAAA,YAAhC,eAAOG,EAAP,KAAiBC,EAAjB,KACA,GAAgDJ,EAAAA,EAAAA,YAAhD,eAAOK,EAAP,KAAyBC,EAAzB,KAsCMC,GACJ,2BACGN,GAAU,SAACO,EAAA,EAAD,KAAsB,SAACC,EAAA,EAAD,KACjC,gBAAKC,MAAO,CAAEC,UAAW,GAAzB,uBAQJ,OAJAC,EAAAA,EAAAA,YAAU,WAET,GAAC,KAGA,+BACE,SAAC,KAAD,CACEC,MAAO,sBACPC,KAAMvB,EACNwB,KAAMtB,EACNuB,SAAU,kBAAMxB,GAAW,EAAjB,EAJZ,UAME,UAAC,IAAD,CACEG,KAAMA,EACNsB,KAAK,QACLC,OAAO,WACPC,SAzDa,SAACC,GACpB,IAAMC,GAAQ,kBAAQD,GAAR,IAAeE,MAAOjB,IAEZR,EAAiBwB,GAAUE,SAE9CC,MAAK,SAACC,GACoB,MAAnBA,EAAIC,aACJtC,EAAAA,GAAAA,QAAgB,2BAChBI,GAAW,GACXG,EAAKgC,cAEZ,IACAC,OAAM,SAACC,GACJzC,EAAAA,GAAAA,MAAA,sCAA6CyC,EAAIzC,SACpD,GAGN,EAyCO0C,aAAa,MALf,WAQE,SAAC,SAAD,CACEb,KAAK,QACLc,MAAM,SACNC,MAAO,CACL,CAAEC,UAAU,EAAM7C,QAAQ,6BAJ9B,UAOE,SAAC,IAAD,CACE6B,KAAK,OACLiB,SAAS,eACTC,gBAAgB,EAChBC,OAAO,2CACPpD,aAAcA,EACdqD,SAvDkC,SAACC,GACpB,cAArBA,EAAKrD,KAAKsD,OAIW,SAArBD,EAAKrD,KAAKsD,SACZjC,EAAoBgC,EAAKrD,KAAKuD,SAASC,OAAOC,KApDlC,SAACC,EAAaC,GAC9B,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,iBAAiB,QAAQ,kBAAMH,EAASC,EAAOJ,OAAtB,IAChCI,EAAOG,cAAcL,EACtB,CAkDKM,CAAUX,EAAKrD,KAAKiE,eAAyB,SAAAR,GAC3CxC,GAAW,GACXE,EAAYsC,EACb,KATDxC,GAAW,EAWd,EAoCS,SAQGC,GAAW,gBAAKgD,IAAKhD,EAAUiD,IAAI,eAAe1C,MAAO,CAAE2C,MAAO,UAAe9C,OAItF,SAAC,SAAD,CACEU,KAAK,QACLc,MAAM,YACNC,MAAO,CACL,CAAEC,UAAU,EAAM7C,QAAQ,gCAJ9B,UAOE,SAAC,QAAD,OAGF,SAAC,SAAD,CACE6B,KAAK,cACLc,MAAM,WACNC,MAAO,CACL,CAAEC,UAAU,EAAM7C,QAAQ,+BAJ9B,UAOE,SAAC,QAAD,OAGF,SAAC,SAAD,CAAWsB,MAAO,CAAEC,UAAW,IAA/B,UACE,UAAC,IAAD,CAAK2C,QAAQ,MAAMC,OAAQ,EAAGC,MAAM,EAApC,WACE,SAAC,IAAD,WACE,SAAC,IAAD,CAAQC,QAAS,kBAAMjE,GAAW,EAAjB,EAAyBkE,SAAU5D,EAApD,6BAIF,SAAC,IAAD,WACE,SAAC,IAAD,CACE6D,SAAS,SACT1D,QAASH,EACT4D,SAAU5D,EACVX,KAAK,UAJP,qCAef,ECnJKH,EAAe,SAACC,GACpB,IAAMC,EAA2B,eAAdD,EAAKE,MAAuC,cAAdF,EAAKE,KACjDD,GACHE,EAAAA,GAAAA,MAAc,sDAEhB,IAAMC,EAASJ,EAAKK,KAAO,KAAO,KAAO,EAIzC,OAHKD,GACHD,EAAAA,GAAAA,MAAc,8CAETF,GAAcG,CACtB,EA2ID,EAzIqC,SAAC,GAAyC,IAAvCE,EAAsC,EAAtCA,QAASC,EAA6B,EAA7BA,WAAYoE,EAAiB,EAAjBA,WAC3D,GAAgDC,EAAAA,EAAAA,MAAhD,eAAOC,EAAP,KAAiC/D,EAAjC,KAAiCA,UACjC,GAA8BC,EAAAA,EAAAA,WAAS,GAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KACA,GAAgCF,EAAAA,EAAAA,YAAhC,eAAOG,EAAP,KAAiBC,EAAjB,KACA,GAAgDJ,EAAAA,EAAAA,YAAhD,eAAOK,EAAP,KAAyBC,EAAzB,KACA,EAAeZ,EAAAA,EAAAA,UAARC,GAAP,gBAoBAiB,EAAAA,EAAAA,YAAU,WACJjB,EAAKoE,aAAa9C,OACpBb,EAAY,+BAAD,OAAgCwD,EAAWtC,QACtD3B,EAAKqE,eAAe,CAClBnD,MAAO+C,EAAW/C,MAClBoD,YAAaL,EAAWK,YACxB3C,MAAM,+BAAD,OAAiCsC,EAAWtC,SAGtD,GAAE,CAACsC,IAEJ,IAeMrD,GACJ,2BACGN,GAAU,SAACO,EAAA,EAAD,KAAsB,SAACC,EAAA,EAAD,KACjC,gBAAKC,MAAO,CAAEC,UAAW,GAAzB,uBAIJ,OACE,+BACE,SAAC,KAAD,CACEE,MAAO,wBACPC,KAAMvB,EACNyB,SAAU,kBAAMxB,GAAW,EAAjB,EAHZ,UAKE,UAAC,IAAD,CACEG,KAAMA,EACNsB,KAAK,QACLC,OAAO,WACPC,SA9Da,SAACC,GACpBA,EAAME,MAAQjB,EACUyD,EAAuB,CAC7CI,GAAIN,EAAWM,GACf9C,MAAAA,IACCG,SAEAC,MAAK,SAACC,GACkB,MAAnBA,EAAIC,aACNtC,EAAAA,GAAAA,QAAgB,8BAChBI,GAAW,GAEd,IACAoC,OAAM,SAACC,GACNzC,EAAAA,GAAAA,MAAA,sCAA6CyC,EAAIzC,SAClD,GACJ,EA+CO0C,aAAa,MALf,WAQE,SAAC,SAAD,CACEb,KAAK,QACLc,MAAM,SACNC,MAAO,CACL,CAAEC,UAAU,EAAM7C,QAAQ,6BAJ9B,UAOE,SAAC,IAAD,CACE6B,KAAK,OACLiB,SAAS,eACTC,gBAAgB,EAChBC,OAAO,2CACPpD,aAAcA,EACdqD,SAlDkC,SAACC,GACpB,cAArBA,EAAKrD,KAAKsD,OAIW,SAArBD,EAAKrD,KAAKsD,SACZjC,EAAoBgC,EAAKrD,KAAKuD,SAASC,OAAOC,KA5DlC,SAACC,EAAaC,GAC9B,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,iBAAiB,QAAQ,kBAAMH,EAASC,EAAOJ,OAAtB,IAChCI,EAAOG,cAAcL,EACtB,CA0DKM,CAAUX,EAAKrD,KAAKiE,eAAyB,SAAAR,GAC3CxC,GAAW,GACXE,EAAYsC,EACb,KATDxC,GAAW,EAWd,EA+BS,SAQGC,GAAW,gBAAKgD,IAAKhD,EAAUiD,IAAI,eAAe1C,MAAO,CAAE2C,MAAO,UAAe9C,OAItF,SAAC,SAAD,CACEU,KAAK,QACLc,MAAM,YACNC,MAAO,CACL,CAAEC,UAAU,EAAM7C,QAAQ,gCAJ9B,UAOE,SAAC,QAAD,OAGF,SAAC,SAAD,CACE6B,KAAK,cACLc,MAAM,WACNC,MAAO,CACL,CAAEC,UAAU,EAAM7C,QAAQ,+BAJ9B,UAOE,SAAC,QAAD,OAGF,SAAC,SAAD,CAAWsB,MAAO,CAAEC,UAAW,IAA/B,UACE,UAAC,IAAD,CAAK2C,QAAQ,MAAMC,OAAQ,EAAGC,MAAM,EAApC,WACE,SAAC,IAAD,WACE,SAAC,IAAD,CAAQC,QAAS,kBAAMjE,GAAW,EAAjB,EAAyBkE,SAAU3D,EAApD,6BAIF,SAAC,IAAD,WACE,SAAC,IAAD,CACE4D,SAAS,SACT1D,QAASF,EACT2D,SAAU3D,EACVZ,KAAK,UAJP,qCAef,E,UCjBD,EA7I2B,WAAO,IAAD,IACzBgF,GAAgBC,EAAAA,EAAAA,MACtB,GAAwCC,EAAAA,EAAAA,MAAxC,eAAOC,EAAP,KAAyBvE,EAAzB,KAAyBA,UACzB,GAAsCC,EAAAA,EAAAA,WAAkB,GAAxD,eAAOuE,EAAP,KAAoBC,EAApB,KACA,GAAsCxE,EAAAA,EAAAA,WAAkB,GAAxD,eAAOyE,EAAP,KAAoBC,EAApB,KACA,GAAoC1E,EAAAA,EAAAA,UAAsB,CAACa,MAAO,GAAIoD,YAAa,GAAI3C,MAAO,KAA9F,eAAOsC,EAAP,KAAmBe,EAAnB,KACA,GAAwB3E,EAAAA,EAAAA,UAAS,GAAjC,eAAO4E,EAAP,KAAaC,EAAb,MACgBC,EAAAA,EAAAA,MAMhB,IAmBMC,EAAyC,CAC7C,CACElE,MAAO,SACPmE,UAAW,KACXC,IAAK,KACL5B,MAAO,KACP6B,OAAQ,SAACC,EAAGC,EAAIC,GAAR,OAAkB,0BAAOA,EAAQ,GAAjC,GAEV,CACExE,MAAO,QACPmE,UAAW,QACXC,IAAK,QACL5B,MAAO,KACP6B,OAAQ,SAACI,EAAMC,GACb,OAAO,SAAC,IAAD,CACLlC,MAAO,GACPmC,OAAQ,GACRrC,IAAG,sCAAiCoC,EAAOjE,QAE9C,GAEH,CACET,MAAO,OACPmE,UAAW,QACXC,IAAK,QACL5B,MAAO,MACP6B,OAAQ,SAACI,GAAD,OAAU,0BAAOA,GAAjB,GAGV,CACEzE,MAAO,cACPmE,UAAW,cACXC,IAAK,cACL5B,MAAO,MACP6B,OAAQ,SAACI,GAAD,OAAU,0BAAOA,GAAjB,GAGV,CACEzE,MAAO,SACPoE,IAAK,SACL5B,MAAO,MACP6B,OAAQ,SAACI,GACP,OACE,UAAC,IAAD,CAAK9B,MAAM,EAAOD,OAAQ,EAA1B,WACE,SAAC,IAAD,WACE,SAAC,IAAD,CACEjE,KAAK,QACLH,KAAK,UACLsG,OAAK,EACPhC,QAAS,kBApECiC,EAoEkBJ,EAnEtCZ,GAAe,QACfC,EAAce,GAFK,IAACA,CAoED,EAJT,qBASF,SAAC,IAAD,WACE,SAAC,KAAD,CACEC,UAAW,kBArEHzB,EAqEsBoB,EAAKpB,QApE9BI,EAAe,CAAEJ,GAAAA,IAAM3C,SAErCC,MAAK,SAACC,GACkB,MAAnBA,EAAIC,YACNtC,EAAAA,GAAAA,QAAgB,2BAEnB,IACAwC,OAAM,SAACC,GACNzC,EAAAA,GAAAA,MAAA,sCAA6CyC,EAAIzC,SAClD,IAVgB,IAAC8E,CAqEG,EACXrD,MAAM,yCAFR,UAIE,SAAC,IAAD,CAAQvB,KAAK,QAAQsG,QAAM,EAAClC,SAAU3D,EAAtC,0BAOT,IAML,OACE,iCACE,UAAC,IAAD,YACE,SAAC,IAAD,CAAK8F,KAAM,GAAX,UACE,SAAC,UAAD,CAAkBC,MAAO,EAAzB,8BAEF,SAAC,IAAD,CAAKD,KAAM,EAAX,UACE,SAAC,IAAD,CACE1G,KAAK,UACLsE,QAAS,kBAAMe,GAAe,SAACuB,GAAD,OAAWA,CAAX,GAArB,EAFX,4BAQJ,SAAC,KAAD,CACEhB,QAASA,EACTiB,WAAU,UAAE7B,EAAcuB,YAAhB,aAAE,EAAoBA,KAChCzF,QAASkE,EAAc8B,WACvBC,WAAY,CACVC,MAAK,UAAEhC,EAAcuB,YAAhB,aAAE,EAAoBA,KAAKU,OAChCC,SAAU,GACVC,QAAS1B,EACTvC,SAAU,SAACkE,GAAD,OAtHlB,SAAkB3B,GAChBC,EAAQD,EACT,CAoHwBvC,CAASkE,EAAhB,EACVC,iBAAiB,MAGrB,SAAC,EAAD,CAAajH,QAASgF,EAAa/E,WAAYgF,KAC/C,SAAC,EAAD,CACEZ,WAAYA,EACZrE,QAASkF,EACTjF,WAAYkF,MAInB,C","sources":["pages/Discount/_components/ModalCreate/ModalCreate.tsx","pages/Discount/_components/ModalUpdate/ModalUpdate.tsx","pages/Discount/Discount.tsx"],"sourcesContent":["import { Button, Col, Form, message, Row, Upload } from \"antd\";\r\nimport { FormElements, Modal } from \"components/index\";\r\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\r\nimport type { UploadChangeParam } from 'antd/es/upload';\r\nimport type { RcFile, UploadFile, UploadProps } from 'antd/es/upload/interface';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useDiscountAddMutation } from \"store/endpoints\";\r\nimport { DiscountDTO } from \"types/discount\";\r\n\r\n\r\ntype Props = {\r\n  visible: boolean;\r\n  setVisible: (bool: boolean) => void;\r\n  handleOk?: () => void;\r\n};\r\n\r\n\r\n\r\nconst getBase64 = (img: RcFile, callback: (url: string) => void) => {\r\n  const reader = new FileReader();\r\n  reader.addEventListener('load', () => callback(reader.result as string));\r\n  reader.readAsDataURL(img);\r\n};\r\n\r\nconst beforeUpload = (file: RcFile) => {\r\n  const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n  if (!isJpgOrPng) {\r\n    message.error('Siz faqat JPG/PNG turdagi fayllarni yuklay olasiz!');\r\n  }\r\n  const isLt2M = file.size / 1024 / 1024 < 2;\r\n  if (!isLt2M) {\r\n    message.error(\"Surat hajmi 2MB dan kichik bo'lishi kerak!\");\r\n  }\r\n  return isJpgOrPng && isLt2M;\r\n};\r\n\r\nconst ModalCreate: React.FC<Props> = ({ visible, setVisible, handleOk }) => {\r\n  const [form] = Form.useForm();\r\n  const [discountMutation, { isLoading: isLoadingDiscount }] = useDiscountAddMutation();\r\n  const [loading, setLoading] = useState(false);\r\n  const [imageUrl, setImageUrl] = useState<string>();\r\n  const [responseImageUrl, setResponseImageUrl] = useState<string>();\r\n\r\n\r\n\r\n  const handleSubmit = (value: DiscountDTO) => {\r\n    const formData = { ...value, image: responseImageUrl }\r\n\r\n    const discountPromise = discountMutation(formData).unwrap();\r\n    discountPromise\r\n        .then((res) => {\r\n            if (res.statusCode === 200) {\r\n                message.success(\"Muvaffaqiyati saqlandi.\");\r\n                setVisible(false);\r\n                form.resetFields();\r\n            }\r\n        })\r\n        .catch((err) => {\r\n            message.error(`Xatolik yuz berdi. Xatolik: ${err.message}`);\r\n        });\r\n\r\n    \r\n  };\r\n\r\n  const handleChange: UploadProps['onChange'] = (info: UploadChangeParam<UploadFile>) => {\r\n    if (info.file.status === 'uploading') {\r\n      setLoading(true);\r\n      return;\r\n    }\r\n    if (info.file.status === 'done') {\r\n      setResponseImageUrl(info.file.response.result.url)\r\n      // Get this url from response in real world.\r\n      getBase64(info.file.originFileObj as RcFile, url => {\r\n        setLoading(false);\r\n        setImageUrl(url);\r\n      });\r\n    }\r\n  };\r\n\r\n  const uploadButton = (\r\n    <div>\r\n      {loading ? <LoadingOutlined /> : <PlusOutlined />}\r\n      <div style={{ marginTop: 8 }}>Upload</div>\r\n    </div>\r\n  );\r\n\r\n  useEffect(()=>{\r\n\r\n  },[])\r\n\r\n  return (\r\n    <>\r\n      <Modal\r\n        title={\"Kategoriya yaratish\"}\r\n        open={visible}\r\n        onOk={handleOk}\r\n        onCancel={() => setVisible(false)}>\r\n\r\n        <Form\r\n          form={form}\r\n          name=\"basic\"\r\n          layout=\"vertical\"\r\n          onFinish={handleSubmit} // onFinishFailed={onFinishFailed}\r\n          autoComplete=\"off\"\r\n        >\r\n\r\n          <Form.Item\r\n            name=\"image\"\r\n            label=\"Rasim:\"\r\n            rules={[\r\n              { required: true, message: `Iltimos Rasimni kiriting` },\r\n            ]}\r\n          >\r\n            <Upload\r\n              name=\"file\"\r\n              listType=\"picture-card\"\r\n              showUploadList={false}\r\n              action=\"http://147.182.130.242:3000/image-upload\"\r\n              beforeUpload={beforeUpload}\r\n              onChange={handleChange}\r\n            >\r\n              {imageUrl ? <img src={imageUrl} alt=\"productImage\" style={{ width: '100%' }} /> : uploadButton}\r\n            </Upload>\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            name=\"title\"\r\n            label=\"Sarlavha:\"\r\n            rules={[\r\n              { required: true, message: `Iltimos Sarlavhani kiriting` },\r\n            ]}\r\n          >\r\n            <FormElements.Input />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            name=\"description\"\r\n            label=\"Tavsifi:\"\r\n            rules={[\r\n              { required: true, message: `Iltimos Tavsifini kiriting` },\r\n            ]}\r\n          >\r\n            <FormElements.Input />\r\n          </Form.Item>\r\n\r\n          <Form.Item style={{ marginTop: 50 }}>\r\n            <Row justify=\"end\" gutter={5} wrap={false}>\r\n              <Col>\r\n                <Button onClick={() => setVisible(false)} disabled={isLoadingDiscount}>\r\n                  Bekor qilish\r\n                </Button>\r\n              </Col>\r\n              <Col>\r\n                <Button\r\n                  htmlType=\"submit\"\r\n                  loading={isLoadingDiscount}\r\n                  disabled={isLoadingDiscount}\r\n                  type=\"primary\"\r\n                >\r\n                  Tasdiqlash\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n          </Form.Item>\r\n        </Form>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ModalCreate;\r\n","import { useState, useEffect } from 'react';\r\nimport { Button, Col, Form, message, Row, Upload } from \"antd\";\r\nimport { FormElements, Modal as AntdModal } from \"components/index\";\r\nimport { DiscountDTO } from \"types\";\r\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\r\nimport type { UploadChangeParam } from 'antd/es/upload';\r\nimport type { RcFile, UploadFile, UploadProps } from 'antd/es/upload/interface';\r\nimport { useDiscountUpdateMutation } from \"store/endpoints\";\r\n\r\n\r\ntype Props = {\r\n  visible: boolean;\r\n  setVisible: (bool: boolean) => void;\r\n  updateData: DiscountDTO;\r\n};\r\nconst getBase64 = (img: RcFile, callback: (url: string) => void) => {\r\n  const reader = new FileReader();\r\n  reader.addEventListener('load', () => callback(reader.result as string));\r\n  reader.readAsDataURL(img);\r\n};\r\n\r\nconst beforeUpload = (file: RcFile) => {\r\n  const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n  if (!isJpgOrPng) {\r\n    message.error('Siz faqat JPG/PNG turdagi fayllarni yuklay olasiz!');\r\n  }\r\n  const isLt2M = file.size / 1024 / 1024 < 2;\r\n  if (!isLt2M) {\r\n    message.error(\"Surat hajmi 2MB dan kichik bo'lishi kerak!\");\r\n  }\r\n  return isJpgOrPng && isLt2M;\r\n};\r\n\r\nconst ModalUpdate: React.FC<Props> = ({ visible, setVisible, updateData }) => {\r\n  const [discountUpdateMutation, { isLoading }] = useDiscountUpdateMutation();\r\n  const [loading, setLoading] = useState(false);\r\n  const [imageUrl, setImageUrl] = useState<string>();\r\n  const [responseImageUrl, setResponseImageUrl] = useState<string>();\r\n  const [form] = Form.useForm();\r\n\r\n  const handleSubmit = (value: any) => {\r\n    value.image = responseImageUrl\r\n    const discountPromise = discountUpdateMutation({\r\n      id: updateData.id,\r\n      value,\r\n    }).unwrap();\r\n    discountPromise\r\n      .then((res) => {\r\n        if (res.statusCode === 200) {\r\n          message.success(\"Muvaffaqiyati tahrirlandi.\");\r\n          setVisible(false);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        message.error(`Xatolik yuz berdi. Xatolik: ${err.message}`);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (form.__INTERNAL__.name) {\r\n      setImageUrl(`http://147.182.130.242:3000/${updateData.image}`)\r\n      form.setFieldsValue({\r\n        title: updateData.title,\r\n        description: updateData.description,\r\n        image: `http://147.182.130.242:3000/${updateData.image}`\r\n      });\r\n    }\r\n  }, [updateData]);\r\n\r\n  const handleChange: UploadProps['onChange'] = (info: UploadChangeParam<UploadFile>) => {\r\n    if (info.file.status === 'uploading') {\r\n      setLoading(true);\r\n      return;\r\n    }\r\n    if (info.file.status === 'done') {\r\n      setResponseImageUrl(info.file.response.result.url)\r\n      // Get this url from response in real world.\r\n      getBase64(info.file.originFileObj as RcFile, url => {\r\n        setLoading(false);\r\n        setImageUrl(url);\r\n      });\r\n    }\r\n  };\r\n\r\n  const uploadButton = (\r\n    <div>\r\n      {loading ? <LoadingOutlined /> : <PlusOutlined />}\r\n      <div style={{ marginTop: 8 }}>Upload</div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <AntdModal\r\n        title={\"Mahsulotni tahrirlash\"}\r\n        open={visible}\r\n        onCancel={() => setVisible(false)}\r\n      >\r\n        <Form\r\n          form={form}\r\n          name=\"basic\"\r\n          layout=\"vertical\"\r\n          onFinish={handleSubmit} // onFinishFailed={onFinishFailed}\r\n          autoComplete=\"off\"\r\n        >\r\n\r\n          <Form.Item\r\n            name=\"image\"\r\n            label=\"Rasim:\"\r\n            rules={[\r\n              { required: true, message: `Iltimos Rasimni kiriting` },\r\n            ]}\r\n          >\r\n            <Upload\r\n              name=\"file\"\r\n              listType=\"picture-card\"\r\n              showUploadList={false}\r\n              action=\"http://147.182.130.242:3000/image-upload\"\r\n              beforeUpload={beforeUpload}\r\n              onChange={handleChange}\r\n            >\r\n              {imageUrl ? <img src={imageUrl} alt=\"productImage\" style={{ width: '100%' }} /> : uploadButton}\r\n            </Upload>\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            name=\"title\"\r\n            label=\"Sarlavha:\"\r\n            rules={[\r\n              { required: true, message: `Iltimos Sarlavhani kiriting` },\r\n            ]}\r\n          >\r\n            <FormElements.Input />\r\n          </Form.Item>\r\n\r\n          <Form.Item\r\n            name=\"description\"\r\n            label=\"Tavsifi:\"\r\n            rules={[\r\n              { required: true, message: `Iltimos Tavsifini kiriting` },\r\n            ]}\r\n          >\r\n            <FormElements.Input />\r\n          </Form.Item>\r\n\r\n          <Form.Item style={{ marginTop: 50 }}>\r\n            <Row justify=\"end\" gutter={5} wrap={false}>\r\n              <Col>\r\n                <Button onClick={() => setVisible(false)} disabled={isLoading}>\r\n                  Bekor qilish\r\n                </Button>\r\n              </Col>\r\n              <Col>\r\n                <Button\r\n                  htmlType=\"submit\"\r\n                  loading={isLoading}\r\n                  disabled={isLoading}\r\n                  type=\"primary\"\r\n                >\r\n                  Tasdiqlash\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n          </Form.Item>\r\n        </Form>\r\n      </AntdModal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ModalUpdate;\r\n","import React, { useState } from \"react\";\r\nimport { Button, Col, Image, message, Row, Space, TableColumnsType } from \"antd\";\r\nimport { Typography } from \"antd\";\r\nimport { PopConfirm, Table } from \"components/index\";\r\nimport ModalCreate from \"./_components/ModalCreate/ModalCreate\";\r\nimport ModalUpdate from \"./_components/ModalUpdate/ModalUpdate\";\r\nimport { DiscountDTO } from \"types/discount\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDiscountDeleteMutation, useDiscountQuery } from \"store/endpoints\";\r\n\r\nconst Discount: React.FC = () => {\r\n  const discountQuery = useDiscountQuery();\r\n  const [discountDelete, { isLoading }] = useDiscountDeleteMutation();\r\n  const [modalCreate, setModalCreate] = useState<boolean>(false);\r\n  const [modalUpdate, setModalUpdate] = useState<boolean>(false);\r\n  const [updateData, setUpdateData] = useState<DiscountDTO>({title: '', description: '', image: ''});\r\n  const [page, setPage] = useState(1);\r\n  const history = useNavigate();\r\n\r\n  function onChange(page: number) {\r\n    setPage(page);\r\n  }\r\n\r\n  const handleUpdate = (data: DiscountDTO) => {\r\n    setModalUpdate(true);\r\n    setUpdateData(data);\r\n  };\r\n\r\n\r\n  const handleDelete = (id: number | undefined) => {\r\n    const discount = discountDelete({ id }).unwrap();\r\n    discount\r\n      .then((res) => {\r\n        if (res.statusCode === 200) {\r\n          message.success(\"Muvaffaqiyati ochirildi.\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        message.error(`Xatolik yuz berdi. Xatolik: ${err.message}`);\r\n      });\r\n  };\r\n\r\n  const columns: TableColumnsType<DiscountDTO> = [\r\n    {\r\n      title: \"№\",\r\n      dataIndex: \"id\",\r\n      key: \"id\",\r\n      width: \"5%\",\r\n      render: (_, __, index) => <span>{index + 1}</span>,\r\n    },\r\n    {\r\n      title: \"Rasim\",\r\n      dataIndex: \"image\",\r\n      key: \"image\",\r\n      width: \"5%\",\r\n      render: (item, record) => {\r\n        return <Image\r\n          width={30}\r\n          height={30}\r\n          src={`http://147.182.130.242:3000/${record.image}`}\r\n          />\r\n      }\r\n    },\r\n    {\r\n      title: \"Name\",\r\n      dataIndex: \"title\",\r\n      key: \"title\",\r\n      width: \"30%\",\r\n      render: (item) => <span>{item}</span>,\r\n    },\r\n\r\n    {\r\n      title: \"Description\",\r\n      dataIndex: \"description\",\r\n      key: \"description\",\r\n      width: \"40%\",\r\n      render: (item) => <span>{item}</span>,\r\n    },\r\n\r\n    {\r\n      title: \"Action\",\r\n      key: \"action\",\r\n      width: \"20%\",\r\n      render: (item: DiscountDTO) => {\r\n        return (\r\n          <Row wrap={false} gutter={5}>\r\n            <Col>\r\n              <Button\r\n                size=\"small\"\r\n                type=\"primary\"\r\n                ghost\r\n              onClick={() => handleUpdate(item)}\r\n              >\r\n                Edit\r\n              </Button>\r\n            </Col>\r\n            <Col>\r\n              <PopConfirm\r\n                onConfirm={() => handleDelete(item.id)}\r\n                title=\"Oʻchirishga ishonchingiz komilmi?\"\r\n              >\r\n                <Button size=\"small\" danger disabled={isLoading}>\r\n                  Delete\r\n                </Button>\r\n              </PopConfirm>\r\n            </Col>\r\n          </Row>\r\n        );\r\n      },\r\n    },\r\n  ];\r\n\r\n  \r\n\r\n  return (\r\n    <>\r\n      <Row>\r\n        <Col span={20}>\r\n          <Typography.Title level={2}>Kategoriyalar</Typography.Title>\r\n        </Col>\r\n        <Col span={4}>\r\n          <Button\r\n            type=\"primary\"\r\n            onClick={() => setModalCreate((prev) => !prev)}\r\n          >\r\n            Yaratish\r\n          </Button>\r\n        </Col>\r\n      </Row>\r\n      <Table\r\n        columns={columns}\r\n        dataSource={discountQuery.data?.data}\r\n        loading={discountQuery.isFetching}\r\n        pagination={{\r\n          total: discountQuery.data?.data.length,\r\n          pageSize: 10,\r\n          current: page,\r\n          onChange: (e) => onChange(e),\r\n          showSizeChanger: false,\r\n        }}\r\n      />\r\n      <ModalCreate visible={modalCreate} setVisible={setModalCreate} />\r\n      <ModalUpdate\r\n        updateData={updateData}\r\n        visible={modalUpdate}\r\n        setVisible={setModalUpdate}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Discount;\r\n"],"names":["beforeUpload","file","isJpgOrPng","type","message","isLt2M","size","visible","setVisible","handleOk","Form","form","useDiscountAddMutation","discountMutation","isLoadingDiscount","isLoading","useState","loading","setLoading","imageUrl","setImageUrl","responseImageUrl","setResponseImageUrl","uploadButton","LoadingOutlined","PlusOutlined","style","marginTop","useEffect","title","open","onOk","onCancel","name","layout","onFinish","value","formData","image","unwrap","then","res","statusCode","resetFields","catch","err","autoComplete","label","rules","required","listType","showUploadList","action","onChange","info","status","response","result","url","img","callback","reader","FileReader","addEventListener","readAsDataURL","getBase64","originFileObj","src","alt","width","justify","gutter","wrap","onClick","disabled","htmlType","updateData","useDiscountUpdateMutation","discountUpdateMutation","__INTERNAL__","setFieldsValue","description","id","discountQuery","useDiscountQuery","useDiscountDeleteMutation","discountDelete","modalCreate","setModalCreate","modalUpdate","setModalUpdate","setUpdateData","page","setPage","useNavigate","columns","dataIndex","key","render","_","__","index","item","record","height","ghost","data","onConfirm","danger","span","level","prev","dataSource","isFetching","pagination","total","length","pageSize","current","e","showSizeChanger"],"sourceRoot":""}