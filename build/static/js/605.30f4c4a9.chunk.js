"use strict";(self.webpackChunkdelivery_admin=self.webpackChunkdelivery_admin||[]).push([[605],{6605:function(e,i,t){t.r(i),t.d(i,{default:function(){return I}});var n=t(9439),a=t(2791),r=t(3695),s=t(6755),l=t(6106),d=t(914),o=t(7309),u=t(5485),c=t(9464),h=t(1413),m=t(1095),f=t(9553),g=t(7106),p=t(9286),j=t(3837),Z=t(184),x=function(e){var i="image/jpeg"===e.type||"image/png"===e.type;i||r.ZP.error("Siz faqat JPG/PNG turdagi fayllarni yuklay olasiz!");var t=e.size/1024/1024<2;return t||r.ZP.error("Surat hajmi 2MB dan kichik bo'lishi kerak!"),i&&t},v=function(e){var i=e.visible,t=e.setVisible,s=e.handleOk,u=m.Z.useForm(),v=(0,n.Z)(u,1)[0],y=(0,j.J_)(),k=(0,n.Z)(y,2),b=k[0],I=k[1].isLoading,w=(0,a.useState)(!1),S=(0,n.Z)(w,2),C=S[0],q=S[1],T=(0,a.useState)(),z=(0,n.Z)(T,2),F=z[0],P=z[1],L=(0,a.useState)(),D=(0,n.Z)(L,2),R=D[0],_=D[1],U=(0,Z.jsxs)("div",{children:[C?(0,Z.jsx)(g.Z,{}):(0,Z.jsx)(p.Z,{}),(0,Z.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,a.useEffect)((function(){}),[]),(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(c.u_,{title:"Kategoriya yaratish",open:i,onOk:s,onCancel:function(){return t(!1)},children:(0,Z.jsxs)(m.Z,{form:v,name:"basic",layout:"vertical",onFinish:function(e){var i=(0,h.Z)((0,h.Z)({},e),{},{image:R});b(i).unwrap().then((function(e){200===e.statusCode&&(r.ZP.success("Muvaffaqiyati saqlandi."),t(!1),v.resetFields())})).catch((function(e){r.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}))},autoComplete:"off",children:[(0,Z.jsx)(m.Z.Item,{name:"image",label:"Rasim:",rules:[{required:!0,message:"Iltimos Rasimni kiriting"}],children:(0,Z.jsx)(f.Z,{name:"file",listType:"picture-card",showUploadList:!1,action:"http://147.182.130.242:3000/image-upload",beforeUpload:x,onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(_(e.file.response.result.url),function(e,i){var t=new FileReader;t.addEventListener("load",(function(){return i(t.result)})),t.readAsDataURL(e)}(e.file.originFileObj,(function(e){q(!1),P(e)}))):q(!0)},children:F?(0,Z.jsx)("img",{src:F,alt:"productImage",style:{width:"100%"}}):U})}),(0,Z.jsx)(m.Z.Item,{name:"title",label:"Sarlavha:",rules:[{required:!0,message:"Iltimos Sarlavhani kiriting"}],children:(0,Z.jsx)(c.Dh.II,{})}),(0,Z.jsx)(m.Z.Item,{name:"description",label:"Tavsifi:",rules:[{required:!0,message:"Iltimos Tavsifini kiriting"}],children:(0,Z.jsx)(c.Dh.II,{})}),(0,Z.jsx)(m.Z.Item,{style:{marginTop:50},children:(0,Z.jsxs)(l.Z,{justify:"end",gutter:5,wrap:!1,children:[(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(o.Z,{onClick:function(){return t(!1)},disabled:I,children:"Bekor qilish"})}),(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(o.Z,{htmlType:"submit",loading:I,disabled:I,type:"primary",children:"Tasdiqlash"})})]})})]})})})},y=function(e){var i="image/jpeg"===e.type||"image/png"===e.type;i||r.ZP.error("Siz faqat JPG/PNG turdagi fayllarni yuklay olasiz!");var t=e.size/1024/1024<2;return t||r.ZP.error("Surat hajmi 2MB dan kichik bo'lishi kerak!"),i&&t},k=function(e){var i=e.visible,t=e.setVisible,s=e.updateData,u=(0,j._I)(),h=(0,n.Z)(u,2),x=h[0],v=h[1].isLoading,k=(0,a.useState)(!1),b=(0,n.Z)(k,2),I=b[0],w=b[1],S=(0,a.useState)(),C=(0,n.Z)(S,2),q=C[0],T=C[1],z=(0,a.useState)(),F=(0,n.Z)(z,2),P=F[0],L=F[1],D=m.Z.useForm(),R=(0,n.Z)(D,1)[0];(0,a.useEffect)((function(){R.__INTERNAL__.name&&(T("http://147.182.130.242:3000/".concat(s.image)),R.setFieldsValue({title:s.title,description:s.description,image:"http://147.182.130.242:3000/".concat(s.image)}))}),[s]);var _=(0,Z.jsxs)("div",{children:[I?(0,Z.jsx)(g.Z,{}):(0,Z.jsx)(p.Z,{}),(0,Z.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsx)(c.u_,{title:"Mahsulotni tahrirlash",open:i,onCancel:function(){return t(!1)},children:(0,Z.jsxs)(m.Z,{form:R,name:"basic",layout:"vertical",onFinish:function(e){e.image=P,x({id:s.id,value:e}).unwrap().then((function(e){200===e.statusCode&&(r.ZP.success("Muvaffaqiyati tahrirlandi."),t(!1))})).catch((function(e){r.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}))},autoComplete:"off",children:[(0,Z.jsx)(m.Z.Item,{name:"image",label:"Rasim:",rules:[{required:!0,message:"Iltimos Rasimni kiriting"}],children:(0,Z.jsx)(f.Z,{name:"file",listType:"picture-card",showUploadList:!1,action:"http://147.182.130.242:3000/image-upload",beforeUpload:y,onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(L(e.file.response.result.url),function(e,i){var t=new FileReader;t.addEventListener("load",(function(){return i(t.result)})),t.readAsDataURL(e)}(e.file.originFileObj,(function(e){w(!1),T(e)}))):w(!0)},children:q?(0,Z.jsx)("img",{src:q,alt:"productImage",style:{width:"100%"}}):_})}),(0,Z.jsx)(m.Z.Item,{name:"title",label:"Sarlavha:",rules:[{required:!0,message:"Iltimos Sarlavhani kiriting"}],children:(0,Z.jsx)(c.Dh.II,{})}),(0,Z.jsx)(m.Z.Item,{name:"description",label:"Tavsifi:",rules:[{required:!0,message:"Iltimos Tavsifini kiriting"}],children:(0,Z.jsx)(c.Dh.II,{})}),(0,Z.jsx)(m.Z.Item,{style:{marginTop:50},children:(0,Z.jsxs)(l.Z,{justify:"end",gutter:5,wrap:!1,children:[(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(o.Z,{onClick:function(){return t(!1)},disabled:v,children:"Bekor qilish"})}),(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(o.Z,{htmlType:"submit",loading:v,disabled:v,type:"primary",children:"Tasdiqlash"})})]})})]})})})},b=t(7689),I=function(){var e,i,t=(0,j.I6)(),h=(0,j.XL)(),m=(0,n.Z)(h,2),f=m[0],g=m[1].isLoading,p=(0,a.useState)(!1),x=(0,n.Z)(p,2),y=x[0],I=x[1],w=(0,a.useState)(!1),S=(0,n.Z)(w,2),C=S[0],q=S[1],T=(0,a.useState)({title:"",description:"",image:""}),z=(0,n.Z)(T,2),F=z[0],P=z[1],L=(0,a.useState)(1),D=(0,n.Z)(L,2),R=D[0],_=D[1];(0,b.s0)();var U=[{title:"\u2116",dataIndex:"id",key:"id",width:"5%",render:function(e,i,t){return(0,Z.jsx)("span",{children:t+1})}},{title:"Rasim",dataIndex:"image",key:"image",width:"5%",render:function(e,i){return(0,Z.jsx)(s.Z,{width:30,height:30,src:"http://147.182.130.242:3000/".concat(i.image)})}},{title:"Name",dataIndex:"title",key:"title",width:"30%",render:function(e){return(0,Z.jsx)("span",{children:e})}},{title:"Description",dataIndex:"description",key:"description",width:"40%",render:function(e){return(0,Z.jsx)("span",{children:e})}},{title:"Action",key:"action",width:"20%",render:function(e){return(0,Z.jsxs)(l.Z,{wrap:!1,gutter:5,children:[(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(o.Z,{size:"small",type:"primary",ghost:!0,onClick:function(){return i=e,q(!0),void P(i);var i},children:"Edit"})}),(0,Z.jsx)(d.Z,{children:(0,Z.jsx)(c.EY,{onConfirm:function(){return i=e.id,void f({id:i}).unwrap().then((function(e){200===e.statusCode&&r.ZP.success("Muvaffaqiyati ochirildi.")})).catch((function(e){r.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}));var i},title:"O\u02bbchirishga ishonchingiz komilmi?",children:(0,Z.jsx)(o.Z,{size:"small",danger:!0,disabled:g,children:"Delete"})})})]})}}];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(l.Z,{children:[(0,Z.jsx)(d.Z,{span:20,children:(0,Z.jsx)(u.Z.Title,{level:2,children:"Kategoriyalar"})}),(0,Z.jsx)(d.Z,{span:4,children:(0,Z.jsx)(o.Z,{type:"primary",onClick:function(){return I((function(e){return!e}))},children:"Yaratish"})})]}),(0,Z.jsx)(c.iA,{columns:U,dataSource:null===(e=t.data)||void 0===e?void 0:e.data,loading:t.isFetching,pagination:{total:null===(i=t.data)||void 0===i?void 0:i.data.length,pageSize:10,current:R,onChange:function(e){return function(e){_(e)}(e)},showSizeChanger:!1}}),(0,Z.jsx)(v,{visible:y,setVisible:I}),(0,Z.jsx)(k,{updateData:F,visible:C,setVisible:q})]})}}}]);
//# sourceMappingURL=605.30f4c4a9.chunk.js.map