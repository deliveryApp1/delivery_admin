{"version":3,"file":"static/js/947.2eaaf51d.chunk.js","mappings":"iLAiFA,UA5D2B,SAACA,IACVC,EAAAA,EAAAA,KAANC,EAAR,IACMC,GAAQC,EAAAA,EAAAA,UACRC,GAASD,EAAAA,EAAAA,UACTE,GAAeF,EAAAA,EAAAA,UAErB,GAA4BG,EAAAA,EAAAA,UAAS,IAArC,eAAOC,EAAP,KAAeC,EAAf,KACA,GAA8BF,EAAAA,EAAAA,UAAS,IAAvC,eAAgBG,GAAhB,WACA,GAAoCH,EAAAA,EAAAA,WAAS,GAA7C,eAAmBI,GAAnB,WAOMC,EAAa,SAACJ,GAA2C,IAAD,IAC1DC,EAAUD,GACL,OAALL,QAAK,IAALA,GAAA,UAAAA,EAAOU,eAAP,mBAAgBC,QAAQN,UAAxB,SAAiCO,MAAK,SAACC,GACnC,IAAMC,EAAiBD,EAAIE,WAAWC,IAAI,GACpCC,EAAa,EACfH,EAAeI,gBAAgBC,OACzBL,EAAeM,mBACvBC,OAAOC,SAASC,KAAK,MACvBhB,EAAWU,EACd,GACJ,EAeD,OACI,SAAC,KAAD,WACI,UAAC,KAAD,CACIO,aAAc,CAAEC,OAAQ,CAAC,UAAW,WAAYC,KAAM,IACtDC,UAAU,YAAYC,QAjBf,SAACC,GAChB,IAGO,IAHDxB,EAASwB,EAAEb,IAAI,UACjBb,EAAaO,QACbP,EAAaO,QAAQoB,SAASC,eAAe1B,IAE7CF,EAAaO,QAtBG,SAACL,GACrB,GAAIL,EAAMU,QACN,OAAO,IAAIV,EAAMU,QAAQsB,UAAU3B,EAC1C,CAmB8B4B,CAAgB5B,GACvC,UAAAH,EAAOQ,eAAP,SAAgBK,WAAWmB,IAAI/B,EAAaO,SAC5C,UAAAP,EAAaO,eAAb,SAAsByB,OAAOD,IAAI,WAAW,WAAa,IAAD,EACpDzB,EAAU,UAACN,EAAaO,eAAd,aAAC,EAAsBoB,SAASM,iBAC7C,KAEL3B,EAAWJ,EACd,EAMWgC,OAAQ,SAACR,GACDA,IACA7B,EAAMU,QAAUmB,EAChBA,EAAES,OAAM,kBAAM9B,GAAc,EAApB,IAEf,EACD+B,QAAS,CAAC,0BAA2B,YAAa,UAAW,uBACzD,UAAW,gBAAiB,0BAVpC,WAWI,SAAC,KAAD,KACA,SAAC,KAAD,CAAWT,SAAUzB,QAIpC,C","sources":["pages/Home/index.tsx"],"sourcesContent":["import React, { useRef, useState } from 'react'\r\nimport { useTranslation } from 'react-i18next';\r\nimport { YMaps, Map, FullscreenControl, Placemark } from \"react-yandex-maps\";\r\ntype Props = {}\r\n\r\ntype Mapref = {\r\n    current: any;\r\n    geoObjects: any;\r\n};\r\ntype Ymaps = {\r\n    current?: any;\r\n    geocode?: any;\r\n    Placemark?: any;\r\n};\r\ntype PlacemarkRef = {\r\n    current: any;\r\n    geocode: any;\r\n    geometry: any;\r\n    events: any;\r\n};\r\n\r\nconst HomePage: React.FC = (props: Props) => {\r\n    const { t } = useTranslation()\r\n    const ymaps = useRef<Ymaps>();\r\n    const mapRef = useRef<Mapref>();\r\n    const placemarkRef = useRef<PlacemarkRef>();\r\n    // const [coordinates, setCoordinates] = useState([]);\r\n    const [coords, setCoords] = useState([]);\r\n    const [address, setAddress] = useState(\"\");\r\n    const [isMapReady, setIsMapReady] = useState(false);\r\n\r\n    const createPlacemark = (coords: any) => {\r\n        if (ymaps.current)\r\n            return new ymaps.current.Placemark(coords);\r\n    };\r\n\r\n    const getAddress = (coords: React.SetStateAction<never[]>) => {\r\n        setCoords(coords)\r\n        ymaps?.current?.geocode(coords)?.then((res: { geoObjects: { get: (arg0: number) => any; }; }) => {\r\n            const firstGeoObject = res.geoObjects.get(0);\r\n            const newAddress = [\r\n                firstGeoObject.getLocalities().length\r\n                    ? firstGeoObject.getAddressLine() : firstGeoObject.getAddressLine()\r\n            ].filter(Boolean).join(\", \");\r\n            setAddress(newAddress);\r\n        });\r\n    };\r\n\r\n    const onMapClick = (e: { get: (arg0: string) => any; }) => {\r\n        const coords = e.get(\"coords\");\r\n        if (placemarkRef.current) {\r\n            placemarkRef.current.geometry.setCoordinates(coords);\r\n        } else {\r\n            placemarkRef.current = createPlacemark(coords);\r\n            mapRef.current?.geoObjects.add(placemarkRef.current);\r\n            placemarkRef.current?.events.add(\"dragend\", function () {\r\n                getAddress(placemarkRef.current?.geometry.getCoordinates());\r\n            });\r\n        }\r\n        getAddress(coords);\r\n    };\r\n    return (\r\n        <YMaps>\r\n            <Map\r\n                defaultState={{ center: [55.751574, 37.573856], zoom: 10 }}\r\n                className='mapYandex' onClick={onMapClick}\r\n                onLoad={(e) => {\r\n                    if (e) {\r\n                        ymaps.current = e\r\n                        e.ready(() => setIsMapReady(true))\r\n                    }\r\n                }}\r\n                modules={['geoObject.addon.balloon', \"Placemark\", \"geocode\", 'geoObject.addon.hint',\r\n                    'borders', 'ObjectManager', 'geoObject.addon.editor']}>\r\n                <FullscreenControl />\r\n                <Placemark geometry={coords} />\r\n            </Map>\r\n        </YMaps>\r\n    )\r\n}\r\n\r\nexport default HomePage"],"names":["props","useTranslation","t","ymaps","useRef","mapRef","placemarkRef","useState","coords","setCoords","setAddress","setIsMapReady","getAddress","current","geocode","then","res","firstGeoObject","geoObjects","get","newAddress","getLocalities","length","getAddressLine","filter","Boolean","join","defaultState","center","zoom","className","onClick","e","geometry","setCoordinates","Placemark","createPlacemark","add","events","getCoordinates","onLoad","ready","modules"],"sourceRoot":""}