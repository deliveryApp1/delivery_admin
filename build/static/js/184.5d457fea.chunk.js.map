{"version":3,"file":"static/js/184.5d457fea.chunk.js","mappings":"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","sources":["pages/Products/components/CreateModal/CreateModal.tsx","pages/Products/components/UpdateModal/UpdateModal.tsx","pages/Products/Product.tsx"],"sourcesContent":["import { useProductAddMutation } from \"store/endpoints\";\r\nimport { Button, Col, Form, message, Row, Input, InputNumber, Upload, Select } from \"antd\";\r\nimport { FormElements, Modal as AntdModal } from \"components/index\";\r\nimport { ProductDTO } from \"types\";\r\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\r\nimport type { UploadChangeParam } from 'antd/es/upload';\r\nimport type { RcFile, UploadFile, UploadProps } from 'antd/es/upload/interface';\r\nimport React, { useState } from 'react';\r\n\r\nconst { TextArea } = Input\r\nconst { Option } = Select;\r\n\r\ntype Props = {\r\n    visible: boolean;\r\n    setVisible: (bool: boolean) => void;\r\n    handleOk?: () => void;\r\n    categoryData: any\r\n};\r\n\r\nconst formItemLayout = {\r\n    labelCol: {\r\n        span: 8,\r\n    },\r\n    wrapperCol: {\r\n        span: 14,\r\n    },\r\n}\r\n\r\nconst getBase64 = (img: RcFile, callback: (url: string) => void) => {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => callback(reader.result as string));\r\n    reader.readAsDataURL(img);\r\n};\r\n\r\nconst beforeUpload = (file: RcFile) => {\r\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n    if (!isJpgOrPng) {\r\n        message.error('Siz faqat JPG/PNG turdagi fayllarni yuklay olasiz!');\r\n    }\r\n    const isLt2M = file.size / 1024 / 1024 < 2;\r\n    if (!isLt2M) {\r\n        message.error(\"Surat hajmi 2MB dan kichik bo'lishi kerak!\");\r\n    }\r\n    return isJpgOrPng && isLt2M;\r\n};\r\n\r\nconst ModalCreate: React.FC<Props> = ({ visible, setVisible, handleOk, categoryData }) => {\r\n    const [loading, setLoading] = useState(false);\r\n    const [imageUrl, setImageUrl] = useState<string>();\r\n    const [responseImageUrl, setResponseImageUrl] = useState<string>();\r\n    const [form] = Form.useForm();\r\n    const [productMutation, { isLoading }] = useProductAddMutation();\r\n\r\n    const handleSubmit = (value: ProductDTO) => {\r\n        const formData = { ...value, image: responseImageUrl }\r\n\r\n        const productPromise = productMutation(formData).unwrap();\r\n        productPromise\r\n            .then((res) => {\r\n                if (res.statusCode === 200) {\r\n                    message.success(\"Muvaffaqiyati saqlandi.\");\r\n                    setVisible(false);\r\n                    form.resetFields();\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                message.error(`Xatolik yuz berdi. Xatolik: ${err.message}`);\r\n            });\r\n    };\r\n\r\n    const handleChange: UploadProps['onChange'] = (info: UploadChangeParam<UploadFile>) => {\r\n        if (info.file.status === 'uploading') {\r\n            setLoading(true);\r\n            return;\r\n        }\r\n        if (info.file.status === 'done') {\r\n            setResponseImageUrl(info.file.response.result.url)\r\n            // Get this url from response in real world.\r\n            getBase64(info.file.originFileObj as RcFile, url => {\r\n                setLoading(false);\r\n                setImageUrl(url);\r\n            });\r\n        }\r\n    };\r\n\r\n    const uploadButton = (\r\n        <div>\r\n            {loading ? <LoadingOutlined /> : <PlusOutlined />}\r\n            <div style={{ marginTop: 8 }}>Upload</div>\r\n        </div>\r\n    );\r\n    const categoryOptions = categoryData?.map((category: { id: any; name: string | number | boolean | React.ReactElement<any, string | React.JSXElementConstructor<any>> | React.ReactFragment | React.ReactPortal | null | undefined; }) => (<Option key={category.id} value={category.id}>{category.name}</Option>))\r\n    return (\r\n        <>\r\n            <AntdModal\r\n                title={\"Mahsulot qo'shish\"}\r\n                open={visible}\r\n                onOk={handleOk}\r\n                onCancel={() => setVisible(false)}\r\n            >\r\n                <Form\r\n                    {...formItemLayout}\r\n                    form={form}\r\n                    name=\"basic\"\r\n                    layout=\"horizontal\"\r\n                    onFinish={handleSubmit} // onFinishFailed={onFinishFailed}\r\n                    autoComplete=\"off\"\r\n                >\r\n                    <Form.Item\r\n                        name='image'\r\n                        label='Rasm:'\r\n                        rules={[\r\n                            { required: true, message: `Rasm yuklanmadi` },\r\n                        ]}\r\n                    >\r\n                        <Upload\r\n                            name=\"file\"\r\n                            listType=\"picture-card\"\r\n                            className=\"avatar-uploader\"\r\n                            showUploadList={false}\r\n                            action=\"http://147.182.130.242:3000/image-upload\"\r\n                            beforeUpload={beforeUpload}\r\n                            onChange={handleChange}\r\n                        >\r\n                            {imageUrl ? <img src={imageUrl} alt=\"productImage\" style={{ width: '100%' }} /> : uploadButton}\r\n                        </Upload>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"name\"\r\n                        label=\"Mahsulot nomi:\"\r\n                        rules={[\r\n                            { required: true, message: `Mahsulot nomini kiriting` },\r\n                        ]}\r\n                    >\r\n                        <FormElements.Input />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"categoryId\"\r\n                        label=\"Kategoriyasi:\"\r\n                        rules={[\r\n                            { required: true, message: `Kategoriyalar` },\r\n                        ]}\r\n                    >\r\n                        <Select allowClear placeholder='Kategoriyani tanlang'>\r\n                            {categoryOptions}\r\n                        </Select>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"description\"\r\n                        label=\"Ta'rifi:\"\r\n                        rules={[\r\n                            { required: false, message: `Ta'rif kiriting` },\r\n                        ]}\r\n                    >\r\n                        <TextArea allowClear autoSize />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"price\"\r\n                        label=\"Narxi:\"\r\n                        style={{ width: '100%' }}\r\n                        rules={[\r\n                            { required: true, message: `Narxni kiriting` },\r\n                        ]}\r\n                    >\r\n                        <InputNumber addonAfter=\"so'm\" />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"discount\"\r\n                        label=\"Chegirma:\"\r\n                        rules={[\r\n                            { required: false, message: `Chegirma kiriting` },\r\n                        ]}\r\n                    >\r\n                        <InputNumber addonAfter=\"%\" />\r\n                    </Form.Item>\r\n                    <Form.Item style={{ marginTop: 50 }}>\r\n                        <Row justify=\"end\" gutter={5} wrap={false}>\r\n                            <Col>\r\n                                <Button onClick={() => setVisible(false)} disabled={isLoading}>\r\n                                    Bekor qilish\r\n                                </Button>\r\n                            </Col>\r\n                            <Col>\r\n                                <Button\r\n                                    htmlType=\"submit\"\r\n                                    loading={isLoading}\r\n                                    disabled={isLoading}\r\n                                    type=\"primary\"\r\n                                >\r\n                                    Tasdiqlash\r\n                                </Button>\r\n                            </Col>\r\n                        </Row>\r\n                    </Form.Item>\r\n                </Form>\r\n            </AntdModal>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ModalCreate;\r\n","import { Button, Col, Form, message, Row, Input, InputNumber, Upload, Select } from \"antd\";\r\nimport { FormElements, Modal as AntdModal } from \"components/index\";\r\nimport { ProductDTO } from \"types\";\r\nimport { LoadingOutlined, PlusOutlined } from '@ant-design/icons';\r\nimport type { UploadChangeParam } from 'antd/es/upload';\r\nimport type { RcFile, UploadFile, UploadProps } from 'antd/es/upload/interface';\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useProductUpdateMutation } from \"store/endpoints\";\r\n\r\nconst { TextArea } = Input\r\nconst { Option } = Select;\r\n\r\ntype Props = {\r\n    visible: boolean;\r\n    setVisible: (bool: boolean) => void;\r\n    updateData: ProductDTO;\r\n    categoryData: any\r\n};\r\n\r\nconst formItemLayout = {\r\n    labelCol: {\r\n        span: 8,\r\n    },\r\n    wrapperCol: {\r\n        span: 14,\r\n    },\r\n}\r\n\r\nconst getBase64 = (img: RcFile, callback: (url: string) => void) => {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => callback(reader.result as string));\r\n    reader.readAsDataURL(img);\r\n};\r\n\r\nconst beforeUpload = (file: RcFile) => {\r\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n    if (!isJpgOrPng) {\r\n        message.error('Siz faqat JPG/PNG turdagi fayllarni yuklay olasiz!');\r\n    }\r\n    const isLt2M = file.size / 1024 / 1024 < 2;\r\n    if (!isLt2M) {\r\n        message.error(\"Surat hajmi 2MB dan kichik bo'lishi kerak!\");\r\n    }\r\n    return isJpgOrPng && isLt2M;\r\n};\r\n\r\nconst ModalUpdate: React.FC<Props> = ({ visible, setVisible, updateData, categoryData }) => {\r\n    const [productUpdateMutation, { isLoading }] = useProductUpdateMutation();\r\n    const [loading, setLoading] = useState(false);\r\n    const [imageUrl, setImageUrl] = useState<string>();\r\n    const [responseImageUrl, setResponseImageUrl] = useState<string>();\r\n    const [form] = Form.useForm();\r\n\r\n    const handleSubmit = (value: any) => {\r\n        value.image = responseImageUrl\r\n        const categoryPromise = productUpdateMutation({\r\n            id: updateData.id,\r\n            value,\r\n        }).unwrap();\r\n        categoryPromise\r\n            .then((res) => {\r\n                if (res.statusCode === 200) {\r\n                    message.success(\"Muvaffaqiyati tahrirlandi.\");\r\n                    setVisible(false);\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                message.error(`Xatolik yuz berdi. Xatolik: ${err.message}`);\r\n            });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (form.__INTERNAL__.name) {\r\n            setImageUrl(`http://147.182.130.242:3000/${updateData.image}`)\r\n            form.setFieldsValue({\r\n                name: updateData.name,\r\n                categoryId: updateData.categoryId,\r\n                description: updateData.description,\r\n                discount: updateData.discount,\r\n                price: updateData.price,\r\n                image: `http://147.182.130.242:3000/${updateData.image}`\r\n            });\r\n        }\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [updateData]);\r\n\r\n    const handleChange: UploadProps['onChange'] = (info: UploadChangeParam<UploadFile>) => {\r\n        if (info.file.status === 'uploading') {\r\n            setLoading(true);\r\n            return;\r\n        }\r\n        if (info.file.status === 'done') {\r\n            setResponseImageUrl(info.file.response.result.url)\r\n            // Get this url from response in real world.\r\n            getBase64(info.file.originFileObj as RcFile, url => {\r\n                setLoading(false);\r\n                setImageUrl(url);\r\n            });\r\n        }\r\n    };\r\n\r\n    const uploadButton = (\r\n        <div>\r\n            {loading ? <LoadingOutlined /> : <PlusOutlined />}\r\n            <div style={{ marginTop: 8 }}>Upload</div>\r\n        </div>\r\n    );\r\n    const categoryOptions = categoryData?.map((category: { id: any; name: string | number | boolean | React.ReactElement<any, string | React.JSXElementConstructor<any>> | React.ReactFragment | React.ReactPortal | null | undefined; }) => (<Option key={category.id} value={category.id}>{category.name}</Option>))\r\n\r\n    return (\r\n        <>\r\n            <AntdModal\r\n                title={\"Mahsulotni tahrirlash\"}\r\n                open={visible}\r\n                onCancel={() => setVisible(false)}\r\n            >\r\n                <Form\r\n                    {...formItemLayout}\r\n                    form={form}\r\n                    name=\"basic\"\r\n                    layout=\"horizontal\"\r\n                    onFinish={handleSubmit} // onFinishFailed={onFinishFailed}\r\n                    autoComplete=\"off\"\r\n                >\r\n                    <Form.Item\r\n                        name='image'\r\n                        label='Rasm:'\r\n                        rules={[\r\n                            { required: true, message: `Rasm yuklanmadi` },\r\n                        ]}\r\n                    >\r\n                        <Upload\r\n                            name=\"file\"\r\n                            listType=\"picture-card\"\r\n                            className=\"avatar-uploader\"\r\n                            showUploadList={false}\r\n                            action=\"http://147.182.130.242:3000/image-upload\"\r\n                            beforeUpload={beforeUpload}\r\n                            onChange={handleChange}\r\n                        >\r\n                            {imageUrl ? <img src={imageUrl} alt=\"productImage\" style={{ width: '100%' }} /> : uploadButton}\r\n                        </Upload>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"name\"\r\n                        label=\"Mahsulot nomi:\"\r\n                        rules={[\r\n                            { required: true, message: `Mahsulot nomini kiriting` },\r\n                        ]}\r\n                    >\r\n                        <FormElements.Input />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"categoryId\"\r\n                        label=\"Kategoriyasi:\"\r\n                        rules={[\r\n                            { required: true, message: `Kategoriyalar` },\r\n                        ]}\r\n                    >\r\n                        <Select allowClear placeholder='Kategoriyani tanlang'>\r\n                            {categoryOptions}\r\n                        </Select>\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"description\"\r\n                        label=\"Ta'rifi:\"\r\n                        rules={[\r\n                            { required: false, message: `Ta'rif kiriting` },\r\n                        ]}\r\n                    >\r\n                        <TextArea allowClear autoSize />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"price\"\r\n                        label=\"Narxi:\"\r\n                        style={{ width: '100%' }}\r\n                        rules={[\r\n                            { required: true, message: `Narxni kiriting` },\r\n                        ]}\r\n                    >\r\n                        <InputNumber addonAfter=\"so'm\" />\r\n                    </Form.Item>\r\n                    <Form.Item\r\n                        name=\"discount\"\r\n                        label=\"Chegirma:\"\r\n                        rules={[\r\n                            { required: false, message: `Chegirma kiriting` },\r\n                        ]}\r\n                    >\r\n                        <InputNumber addonAfter=\"%\" />\r\n                    </Form.Item>\r\n                    <Form.Item style={{ marginTop: 50 }}>\r\n                        <Row justify=\"end\" gutter={5} wrap={false}>\r\n                            <Col>\r\n                                <Button onClick={() => setVisible(false)} disabled={isLoading}>\r\n                                    Bekor qilish\r\n                                </Button>\r\n                            </Col>\r\n                            <Col>\r\n                                <Button\r\n                                    htmlType=\"submit\"\r\n                                    loading={isLoading}\r\n                                    disabled={isLoading}\r\n                                    type=\"primary\"\r\n                                >\r\n                                    Tasdiqlash\r\n                                </Button>\r\n                            </Col>\r\n                        </Row>\r\n                    </Form.Item>\r\n                </Form>\r\n            </AntdModal>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default ModalUpdate;\r\n","import React, { useState } from \"react\";\r\nimport { Button, Col, message, Row, TableColumnsType, Image, Space } from \"antd\";\r\nimport { Typography } from \"antd\";\r\nimport { PopConfirm, Table } from \"components/index\";\r\nimport CreateModal from \"./components/CreateModal/CreateModal\";\r\nimport UpdateModal from \"./components/UpdateModal/UpdateModal\";\r\nimport { ProductDTO } from \"types\";\r\nimport { useProductDeleteMutation, useProductQuery, useCategoryQuery } from \"store/endpoints\";\r\n\r\nconst Category: React.FC = () => {\r\n    const categoryQuery = useCategoryQuery();\r\n    const productQuery = useProductQuery();\r\n    const [productDelete, { isLoading }] = useProductDeleteMutation();\r\n    const [modalCreate, setModalCreate] = useState<boolean>(false);\r\n    const [modalUpdate, setModalUpdate] = useState<boolean>(false);\r\n    const [updateData, setUpdateData] = useState<ProductDTO>({ name: '', categoryId: 0, image: '', description: '', price: 0, discount: 0 });\r\n    const handleUpdate = (data: ProductDTO) => {\r\n        setModalUpdate(true);\r\n        setUpdateData(data);\r\n    };\r\n    const handleDelete = (id: number | undefined) => {\r\n        const category = productDelete({ id }).unwrap();\r\n        category\r\n            .then((res) => {\r\n                if (res.statusCode === 200) {\r\n                    message.success(\"Muvaffaqiyati o'chirildi.\");\r\n                    setModalUpdate(false);\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                message.error(`Xatolik yuz berdi. Xatolik: ${err.message}`);\r\n            });\r\n    };\r\n\r\n    const columns: TableColumnsType = [\r\n        {\r\n            title: \"№\",\r\n            dataIndex: \"id\",\r\n            key: \"id\",\r\n            // width: \"5%\",\r\n            render: (item, record, index) => <span>{index + 1}</span>,\r\n        },\r\n        {\r\n            title: \"Nomi\",\r\n            dataIndex: \"name\",\r\n            key: \"name\",\r\n            // width: \"75%\",\r\n            render: (item, record: any) => {\r\n                return <Space size={2}>\r\n                    <Image\r\n                        width={30}\r\n                        height={30}\r\n                        src={`http://147.182.130.242:3000/${record.image}`}\r\n                        fallback=\"data:image/png;base64,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\"\r\n                    />{item}</Space>\r\n            }\r\n        },\r\n        {\r\n            title: \"Tarifi\",\r\n            dataIndex: \"description\",\r\n            key: \"description\",\r\n            // width: \"75%\",\r\n            render: (item, record) => <>{item}</>\r\n        },\r\n        {\r\n            title: \"Narxi\",\r\n            dataIndex: \"price\",\r\n            key: \"price\",\r\n            // width: \"75%\",\r\n            render: (item, record) => <>{item}</>\r\n        },\r\n        {\r\n            title: \"Chegirma\",\r\n            dataIndex: \"discount\",\r\n            key: \"discount\",\r\n            // width: \"75%\",\r\n            render: (item, record) => <>{item}</>\r\n        },\r\n        {\r\n            title: \"Amallar\",\r\n            key: \"action\",\r\n            width: \"20%\",\r\n            render: (item: ProductDTO, record, index) => {\r\n                return (\r\n                    <Row wrap={false} gutter={5}>\r\n                        <Col>\r\n                            <Button\r\n                                size=\"small\"\r\n                                type=\"primary\"\r\n                                ghost\r\n                                onClick={() => handleUpdate(item)}\r\n                            >\r\n                                Tahrirlash\r\n                            </Button>\r\n                        </Col>\r\n                        <Col>\r\n                            <PopConfirm\r\n                                onConfirm={() => handleDelete(item.id)}\r\n                                title=\"Oʻchirishga ishonchingiz komilmi?\"\r\n                            >\r\n                                <Button size=\"small\" danger disabled={isLoading}>\r\n                                    O'chirish\r\n                                </Button>\r\n                            </PopConfirm>\r\n                        </Col>\r\n                    </Row>\r\n                );\r\n            },\r\n        },\r\n    ];\r\n\r\n    return (\r\n        <>\r\n            <Row>\r\n                <Col span={20}>\r\n                    <Typography.Title level={2}>Mahsulotlar</Typography.Title>\r\n                </Col>\r\n                <Col span={4}>\r\n                    <Button\r\n                        type=\"primary\"\r\n                        onClick={() => setModalCreate((prev) => !prev)}\r\n                    >\r\n                        Yaratish\r\n                    </Button>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Table\r\n                columns={columns}\r\n                dataSource={productQuery.data?.data}\r\n                loading={productQuery.isFetching}\r\n                pagination={{ defaultPageSize: 5 }}\r\n                rowKey={record => record.id}\r\n            />\r\n            <CreateModal visible={modalCreate} setVisible={setModalCreate} categoryData={categoryQuery.data?.data} />\r\n            <UpdateModal\r\n                updateData={updateData}\r\n                visible={modalUpdate}\r\n                setVisible={setModalUpdate}\r\n                categoryData={categoryQuery.data?.data}\r\n            />\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Category;\r\n"],"names":["TextArea","Input","Option","Select","formItemLayout","labelCol","span","wrapperCol","beforeUpload","file","isJpgOrPng","type","message","isLt2M","size","visible","setVisible","handleOk","categoryData","useState","loading","setLoading","imageUrl","setImageUrl","responseImageUrl","setResponseImageUrl","Form","form","useProductAddMutation","productMutation","isLoading","uploadButton","LoadingOutlined","PlusOutlined","style","marginTop","categoryOptions","map","category","value","id","name","title","open","onOk","onCancel","layout","onFinish","formData","image","unwrap","then","res","statusCode","resetFields","catch","err","autoComplete","label","rules","required","listType","className","showUploadList","action","onChange","info","status","response","result","url","img","callback","reader","FileReader","addEventListener","readAsDataURL","getBase64","originFileObj","src","alt","width","allowClear","placeholder","autoSize","addonAfter","justify","gutter","wrap","onClick","disabled","htmlType","updateData","useProductUpdateMutation","productUpdateMutation","useEffect","__INTERNAL__","setFieldsValue","categoryId","description","discount","price","categoryQuery","useCategoryQuery","productQuery","useProductQuery","useProductDeleteMutation","productDelete","modalCreate","setModalCreate","modalUpdate","setModalUpdate","setUpdateData","columns","dataIndex","key","render","item","record","index","height","fallback","ghost","data","onConfirm","danger","level","prev","dataSource","isFetching","pagination","defaultPageSize","rowKey","CreateModal","UpdateModal"],"sourceRoot":""}