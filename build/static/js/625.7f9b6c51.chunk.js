"use strict";(self.webpackChunkdelivery_admin=self.webpackChunkdelivery_admin||[]).push([[625],{6625:function(e,n,a){a.r(n),a.d(n,{default:function(){return z}});var i=a(1413),t=a(9439),o=a(2791),r=a(3695),d=a(6106),l=a(914),c=a(7309),u=a(1520),s=a(5671),p=a(1756),f=a(5485),m=a(2972),h=a(4925),Z=a(1095),g=a(2862),v=a(9389),y=a(7555),x=a(3560),j=a(184),k=["updateData","modalType"],T=function(e){var n=e.updateData,a=e.modalType,d=(0,h.Z)(e,k),l=Z.Z.useForm(),c=(0,t.Z)(l,1)[0],u=(0,m.lZ)(),s=(0,t.Z)(u,2),p=s[0],f=s[1],T=(0,m.li)(),C=(0,t.Z)(T,2),z=C[0],w=C[1],X=(0,y.T)(),S=function(){c.resetFields()};(0,o.useEffect)((function(){return n&&"update"===a&&c.setFieldsValue({name:n.name}),function(){return S()}}),[n,a]);var M=(0,i.Z)({onOk:function(){c.validateFields().then((function(e){if("update"===a)z({id:null===n||void 0===n?void 0:n.id,value:e}).unwrap().then((function(e){200===e.statusCode&&(r.ZP.success("Muvaffaqiyati tahrirlandi."),X((0,x.Xj)({openModal:!1,modalType:""})),S())})).catch((function(e){r.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}));else if("create"===a){p(e).unwrap().then((function(e){200===e.statusCode&&(r.ZP.success("Muvaffaqiyati saqlandi."),X((0,x.Xj)({openModal:!1,modalType:""})),S())})).catch((function(e){r.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}))}})).catch((function(e){return console.log("Form error: ",e)}))},confirmLoading:!!a.length&&("create"===a?f.isLoading:w.isLoading)},d);return(0,j.jsx)(g.Z,(0,i.Z)((0,i.Z)({},M),{},{children:(0,j.jsx)(Z.Z,{form:c,name:"basic",layout:"vertical",autoComplete:"off",children:(0,j.jsx)(Z.Z.Item,{name:"name",label:"Nomi:",rules:[{required:!0,message:"Kategoriyani nomini kiriting"}],children:(0,j.jsx)(v.Z,{placeholder:"Nomini kiriting"})})})}))},C=a(3168),z=function(){var e,n,a,h,Z,g=(0,C.$)().t,v=(0,y.C)((function(e){return e.categorySlice})),k=v.openModal,z=v.modalType,w=(0,y.T)(),X=(0,o.useState)({page:1,pageSize:20}),S=(0,t.Z)(X,2),M=S[0],b=S[1],F=(0,m.Im)(M),P=(0,m.No)(),q=(0,t.Z)(P,2),I=q[0],D=q[1].isLoading,L=(0,o.useState)({name:""}),N=(0,t.Z)(L,2),O=N[0],_=N[1],A=[{title:"\u2116",dataIndex:"id",key:"id",width:"5%",render:function(e,n,a){return(0,j.jsx)("span",{children:a+1})}},{title:"Nomi",dataIndex:"name",key:"name",width:"75%",render:function(e){return(0,j.jsx)("span",{children:e})}},{title:"Amallar",key:"action",width:"20%",render:function(e){return(0,j.jsxs)(d.Z,{wrap:!1,gutter:5,children:[(0,j.jsx)(l.Z,{children:(0,j.jsx)(c.Z,{size:"small",type:"primary",ghost:!0,onClick:function(){return _(e),void w((0,x.Xj)({openModal:!0,modalType:"update"}))},children:g("edit")})}),(0,j.jsx)(l.Z,{children:(0,j.jsx)(u.Z,{okText:g("yes"),cancelText:g("no"),onConfirm:function(){return n=e.id,void I({id:n}).unwrap().then((function(e){200===e.statusCode&&r.ZP.success("Muvaffaqiyati o'chirildi.")})).catch((function(e){r.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}));var n},title:g("sureDelete"),children:(0,j.jsx)(c.Z,{size:"small",danger:!0,disabled:D,children:g("delete")})})})]})}}],E={title:g("update"===z?"edit":"add"),open:k,okText:g("update"===z?"edit":"add"),cancelText:g("close"),onCancel:function(){w((0,x.Xj)({openModal:!1,modalType:""})),_(void 0)}},J={total:(null===(e=F.data)||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.total)*(null===(a=F.data)||void 0===a||null===(h=a.meta)||void 0===h?void 0:h.pagesize),page:M.page,pageSizeOptions:["20","50","100"],showQuickJumper:!0,showSizeChanger:!0,pageSize:M.pageSize,current:M.page,onChange:function(e,n){b({page:e,pageSize:n})}};return(0,j.jsx)(s.Z,{children:(0,j.jsxs)(s.Z.Content,{children:[(0,j.jsxs)(d.Z,{children:[(0,j.jsx)(l.Z,{span:20,children:(0,j.jsx)(f.Z.Title,{level:2,children:g("menus.categories")})}),(0,j.jsx)(l.Z,{span:4,children:(0,j.jsx)(c.Z,{type:"primary",onClick:function(){return w((0,x.Xj)({openModal:!0,modalType:"create"}))},children:g("add")})})]}),(0,j.jsx)(p.Z,{columns:A,dataSource:null===(Z=F.data)||void 0===Z?void 0:Z.data,loading:F.isFetching,pagination:J}),(0,j.jsx)(T,(0,i.Z)({updateData:O,modalType:z},E))]})})}},7555:function(e,n,a){a.d(n,{C:function(){return o},T:function(){return t}});var i=a(5010),t=function(){return(0,i.I0)()},o=i.v9}}]);
//# sourceMappingURL=625.7f9b6c51.chunk.js.map