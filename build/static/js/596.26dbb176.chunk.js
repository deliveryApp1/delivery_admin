"use strict";(self.webpackChunkdelivery_admin=self.webpackChunkdelivery_admin||[]).push([[596],{4596:function(e,i,n){n.r(i),n.d(i,{default:function(){return z}});var a=n(1413),t=n(9439),r=n(2791),o=n(3695),d=n(3099),A=n(6755),l=n(6106),s=n(914),c=n(7309),u=n(1520),g=n(5485),E=n(1756),Q=n(3168),h=n(4925),m=n(5487),p=n(9389),B=n(3734),y=n(1095),Z=n(2862),C=n(9553),I=n(3344),f=n(7106),j=n(9286),k=n(5048),v=n(724),x=n(184),N=["updateData","t","categoryData","modalType"],J=p.Z.TextArea,S=B.Z.Option,K={labelCol:{span:8},wrapperCol:{span:14}},M=function(e){var i="image/jpeg"===e.type||"image/png"===e.type;i||o.ZP.error("Siz faqat JPG/PNG turdagi fayllarni yuklay olasiz!");var n=e.size/1024/1024<2;return n||o.ZP.error("Surat hajmi 2MB dan kichik bo'lishi kerak!"),i&&n},b=function(e){var i=e.updateData,n=e.t,d=e.categoryData,A=e.modalType,l=(0,h.Z)(e,N),s=(0,k.I0)(),c=(0,r.useState)(!1),u=(0,t.Z)(c,2),g=u[0],E=u[1],Q=(0,r.useState)(),b=(0,t.Z)(Q,2),z=b[0],R=b[1],F=(0,r.useState)(),w=(0,t.Z)(F,2),T=w[0],U=w[1],P=y.Z.useForm(),Y=(0,t.Z)(P,1)[0],D=(0,m.qt)(),q=(0,t.Z)(D,2),L=q[0],H=q[1],G=(0,m.zp)(),X=(0,t.Z)(G,2),O=X[0],W=X[1];(0,r.useEffect)((function(){return i&&"update"===A&&(R("http://147.182.130.242:3000/".concat(null===i||void 0===i?void 0:i.image)),Y.setFieldsValue({image:null===i||void 0===i?void 0:i.image,name:null===i||void 0===i?void 0:i.name,categoryId:null===i||void 0===i?void 0:i.categoryId,description:null===i||void 0===i?void 0:i.description,price:null===i||void 0===i?void 0:i.price,discount:null===i||void 0===i?void 0:i.discount})),function(){return R(""),void Y.resetFields()}}),[i,A]);var V=(0,x.jsxs)("div",{children:[g?(0,x.jsx)(f.Z,{}):(0,x.jsx)(j.Z,{}),(0,x.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),_=null===d||void 0===d?void 0:d.map((function(e){return(0,x.jsx)(S,{value:e.id,children:e.name},e.id)})),$=(0,a.Z)({onOk:function(){Y.validateFields().then((function(e){console.log("data: ",e);var n=(0,a.Z)((0,a.Z)({},e),{},{image:T});if("update"===A)e.image=T,L({id:i.id,value:n}).unwrap().then((function(e){200===e.statusCode&&(o.ZP.success("Muvaffaqiyati tahrirlandi."),s((0,v.pC)({openModal:!1,modalType:""})),R(""),Y.resetFields())})).catch((function(e){o.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}));else if("create"===A){O(n).unwrap().then((function(e){200===e.statusCode&&(o.ZP.success("Muvaffaqiyati saqlandi."),s((0,v.pC)({openModal:!1,modalType:""})),R(""),Y.resetFields())})).catch((function(e){o.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}))}})).catch((function(e){return console.log("Form error: ",e)}))},confirmLoading:!!A.length&&("create"===A?W.isLoading:H.isLoading),forceRender:!0},l);return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(Z.Z,(0,a.Z)((0,a.Z)({},$),{},{children:(0,x.jsxs)(y.Z,(0,a.Z)((0,a.Z)({},K),{},{form:Y,name:"basic",layout:"horizontal",autoComplete:"off",children:[(0,x.jsx)(y.Z.Item,{name:"image",label:n("image"),rules:[{required:!0,message:"Rasm yuklanmadi"}],children:(0,x.jsx)(C.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"http://147.182.130.242:3000/image-upload",beforeUpload:M,onChange:function(e){"uploading"!==e.file.status?"done"===e.file.status&&(U(e.file.response.result.url),function(e,i){var n=new FileReader;n.addEventListener("load",(function(){return i(n.result)})),n.readAsDataURL(e)}(e.file.originFileObj,(function(e){E(!1),R(e)}))):E(!0)},maxCount:1,children:z?(0,x.jsx)("img",{src:z,alt:"productImage",style:{width:"100%"}}):V})}),(0,x.jsx)(y.Z.Item,{name:"name",label:n("productsMenu.productName"),rules:[{required:!0,message:"Mahsulot nomini kiriting"}],children:(0,x.jsx)(p.Z,{placeholder:"Nomini kiriting"})}),(0,x.jsx)(y.Z.Item,{name:"categoryId",label:n("productsMenu.category"),rules:[{required:!0,message:"Kategoriyalar"}],children:(0,x.jsx)(B.Z,{allowClear:!0,placeholder:"Kategoriyani tanlang",children:_})}),(0,x.jsx)(y.Z.Item,{name:"description",label:n("productsMenu.description"),rules:[{required:!0,message:"Ta'rif kiriting"}],children:(0,x.jsx)(J,{allowClear:!0,autoSize:!0,placeholder:"Ta'rifni kiriting"})}),(0,x.jsx)(y.Z.Item,{name:"price",label:n("productsMenu.price"),style:{width:"100%"},rules:[{required:!0,message:"Narxni kiriting"}],children:(0,x.jsx)(I.Z,{addonAfter:"so'm",placeholder:"1000",style:{width:"100%"}})}),(0,x.jsx)(y.Z.Item,{name:"discount",label:n("productsMenu.discount"),rules:[{required:!1,message:"Chegirma kiriting"}],children:(0,x.jsx)(I.Z,{addonAfter:"%",placeholder:"5",style:{width:"100%"}})})]}))}))})},z=function(){var e,i,n=(0,Q.$)().t,h=(0,k.v9)((function(e){return e.productSlice})),p=h.openModal,B=h.modalType,y=(0,k.I0)(),Z=(0,m.Im)(),C=(0,m.FA)(),I=(0,m.dY)(),f=(0,t.Z)(I,2),j=f[0],N=f[1].isLoading,J=(0,r.useState)(),S=(0,t.Z)(J,2),K=S[0],M=S[1],z=[{title:"\u2116",dataIndex:"id",key:"id",width:"5%",render:function(e,i,n){return(0,x.jsx)("span",{children:n+1})}},{title:n("productsMenu.name"),dataIndex:"name",key:"name",render:function(e,i){return(0,x.jsxs)(d.Z,{size:5,children:[(0,x.jsx)(A.Z,{width:30,height:30,src:"http://147.182.130.242:3000/".concat(i.image),fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="}),e]})}},{title:n("productsMenu.description"),dataIndex:"description",key:"description",render:function(e,i){return(0,x.jsx)(x.Fragment,{children:e})}},{title:n("productsMenu.price"),dataIndex:"price",key:"price",render:function(e,i){return(0,x.jsx)(x.Fragment,{children:e})}},{title:n("productsMenu.discount"),dataIndex:"discount",key:"discount",render:function(e,i){return(0,x.jsx)(x.Fragment,{children:e})}},{title:n("actions"),key:"action",width:"20%",render:function(e,i,a){return(0,x.jsxs)(l.Z,{wrap:!1,gutter:5,children:[(0,x.jsx)(s.Z,{children:(0,x.jsx)(c.Z,{size:"small",type:"primary",ghost:!0,onClick:function(){return M(e),void y((0,v.pC)({openModal:!0,modalType:"update"}))},children:n("edit")})}),(0,x.jsx)(s.Z,{children:(0,x.jsx)(u.Z,{okText:n("yes"),cancelText:n("no"),onConfirm:function(){return i=e.id,void j({id:i}).unwrap().then((function(e){200===e.statusCode&&o.ZP.success("Muvaffaqiyati o'chirildi.")})).catch((function(e){o.ZP.error("Xatolik yuz berdi. Xatolik: ".concat(e.message))}));var i},title:n("sureDelete"),children:(0,x.jsx)(c.Z,{size:"small",danger:!0,disabled:N,children:n("delete")})})})]})}}],R={title:n("update"===B?"edit":"add"),open:p,okText:n("update"===B?"edit":"add"),cancelText:n("close"),onCancel:function(){y((0,v.pC)({openModal:!1,modalType:""})),M(void 0)}};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(l.Z,{children:[(0,x.jsx)(s.Z,{span:20,children:(0,x.jsx)(g.Z.Title,{level:2,children:n("menus.products")})}),(0,x.jsx)(s.Z,{span:4,children:(0,x.jsx)(c.Z,{type:"primary",onClick:function(){return y((0,v.pC)({openModal:!0,modalType:"create"}))},children:n("add")})})]}),(0,x.jsx)(E.Z,{columns:z,dataSource:null===(e=C.data)||void 0===e?void 0:e.data,loading:C.isFetching,pagination:{defaultPageSize:5},rowKey:function(e){return e.id}}),(0,x.jsx)(b,(0,a.Z)({updateData:K,t:n,modalType:B,categoryData:null===(i=Z.data)||void 0===i?void 0:i.data},R))]})}}}]);
//# sourceMappingURL=596.26dbb176.chunk.js.map